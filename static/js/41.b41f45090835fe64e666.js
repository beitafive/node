webpackJsonp([41],{"+j5P":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("bOdI"),a=i.n(e),o=i("Au9i"),c={name:"search",data:function(){return a()({searchName:"",historyList:[],hotSearchList:[],historyAtitle:1,selected:"1",goodsList:[],goodsListOrder:[],goodsListPrice:[],price:"69",count1:0,empty:!0,roate:!0,curPage:1,totalPage:"",loadBottom:"",priceType:!0,sortType:"",sortAsc:""},"priceType",!0)},beforeMount:function(){document.title=this.$route.meta.title},mounted:function(){this.searchHistory()},methods:{clearSearchList:function(){var t=this;o.MessageBox.confirm("确定清空搜索历史吗?").then(function(s){t.$axios.post(t.$api.goods.search_clear,{}).then(function(s){var i=s.data;0==i.code?(t.$toast("清空成功"),t.historyList=[]):t.$toast(i.msg)})})},enterSearchList:function(){this.goodsList=[],this.curPage=1,this.sortType="commission_price",this.sortAsc="desc",this.searchList()},typeSearchList:function(t){this.sortType=t,"price"==t?(this.priceType=!this.priceType,1==this.priceType?this.sortAsc="desc":this.sortAsc="asc"):(this.sortAsc="desc",this.curPage=1),this.searchList()},searchList:function(){var t=this,s=(new Date).valueOf(),i={key_word:t.searchName,sort:t.sortType,sort_asc:t.sortAsc,offset:t.curPage,limit:10,timestamp:s};t.historyAtitle=0,t.$axios.post(t.$api.goods.search,i).then(function(s){var i=s.data;0==i.code?(1==t.curPage&&(t.goodsList=[]),i.data.rows.forEach(function(s){t.goodsList.push(s)}),t.totalPage=s.data.count,0==i.data.rows.length?(t.empty=!1,t.loadBottom=!1):(t.empty=!1,t.loadBottom=!0)):(t.goodsList=[],t.empty=!1)}).catch(function(t){})},searchHistory:function(){var t=this;t.$axios.post(t.$api.goods.search_bar).then(function(s){var i=s.data;0==i.code?(t.hotSearchList=i.data.hot,t.historyList=i.data.history):t.$toast(i.msg)}).catch(function(t){})},selectHistory:function(t){this.searchName=t,this.goodsList=[],this.curPage=1,this.sortType="commission_price",this.sortAsc="desc",this.searchList()},selectHot:function(t){this.searchName=t,this.goodsList=[],this.curPage=1,this.sortType="commission_price",this.sortAsc="desc",this.searchList()},loadMore:function(){var t=this;t.loadBottom=!0,setTimeout(function(){if(t.curPage>=t.totalPage)return t.loadBottom=!1,null;t.curPage++,t.searchList()},2e3)},toGoodsDetailone:function(t){this.$router.push({path:"/goodsdetail",query:{id:t.goods_id}})},toGoodsDetailtwo:function(t){this.$router.push({path:"/goodsdetail",query:{id:t.goods_id}})},toGoodsDetailthree:function(t){this.$router.push({path:"/goodsdetail",query:{id:t.goods_id}})},cons:function(t){t.show=!t.show},goback:function(){window.history.back()}}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"search"},[t.empty?t._e():i("div",{staticClass:"noGoods"},[i("div",{staticStyle:{"text-align":"center"}},[t._v("没有相关商品，看看别的吧！")])]),t._v(" "),i("div",{staticClass:"inputarea-ios"},[i("div",{staticClass:"input"},[i("span",{staticClass:"iconfont"},[t._v("")]),t._v(" "),i("form",{attrs:{action:"javascript:;"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],attrs:{id:"searchIpt",type:"search",placeholder:"搜索"},domProps:{value:t.searchName},on:{keyup:function(s){return"button"in s||!t._k(s.keyCode,"enter",13,s.key,"Enter")?t.enterSearchList(s):null},input:function(s){s.target.composing||(t.searchName=s.target.value)}}})])]),t._v(" "),i("div",{staticClass:"cancel",on:{click:t.goback}},[t._v("取消")])]),t._v(" "),1==t.historyAtitle?i("div",[i("div",{staticClass:"history"},[t.historyList.length?i("div",{staticClass:"title"},[i("p",[t._v("搜索历史")]),t._v(" "),i("span",{staticClass:"iconfont icon-shanchu",on:{click:t.clearSearchList}})]):t._e(),t._v(" "),t.historyList.length?i("div",{staticClass:"content"},t._l(t.historyList,function(s){return i("div",{staticStyle:{"border-radius":"0.06rem"},on:{click:function(i){t.selectHistory(s)}}},[t._v(t._s(s))])})):t._e()]),t._v(" "),i("div",{staticClass:"hot"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},t._l(t.hotSearchList,function(s){return i("div",{staticStyle:{"border-radius":"0.06rem"},on:{click:function(i){t.selectHot(s)}}},[t._v(t._s(s))])}))])]):t._e(),t._v(" "),0==t.historyAtitle?i("div",{staticClass:"goodsContent"},[0!==t.goodsList.length?i("div",{staticClass:"goodScontents"},[i("mt-navbar",{model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[i("mt-tab-item",{attrs:{id:"1"}},[i("span",{staticClass:"select__tab",on:{click:function(s){t.typeSearchList("commission_price")}}},[t._v("默认")])]),t._v(" "),i("mt-tab-item",{attrs:{id:"2"}},[i("span",{staticClass:"select__tab",on:{click:function(s){t.typeSearchList("sales_sum")}}},[t._v("销量")])]),t._v(" "),i("mt-tab-item",{attrs:{id:"3"}},[i("span",{staticClass:"select__tab",on:{click:function(s){t.typeSearchList("price")}}},[t._v("价格   "),i("img",{class:[t.priceType?"rotates_i1":"rotates_i"],staticStyle:{width:"0.16rem"},attrs:{src:"https://wd-image.cdn.hzanchu.com/478879f104b6f7942e1f35e0a6d6fdc7?thumbnail=300"}})])])],1),t._v(" "),i("mt-tab-container",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[i("mt-tab-container-item",{attrs:{id:"1"}},t._l(t.goodsList,function(s,e){return i("div",{key:"a_index",staticClass:"listcard",on:{click:function(i){t.toGoodsDetailone(s)}}},[i("div",{staticClass:"display_img"},[i("div",{staticClass:"img_box"},[i("img",{attrs:{src:s.image}})]),t._v(" "),i("div",{staticClass:"express"},[i("div",[1==s.is_special_sale?i("span",{staticClass:"special"},[t._v("特卖")]):t._e(),t._v(t._s(s.goods_name)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"price"},[i("span",[t._v("￥"+t._s(s.price)+"   ")]),i("span",[t._v("赚"+t._s(s.commission_price))]),t._v(" "),i("span",[t._v(t._s(s.store_count)+" 件")])])])])])})),t._v(" "),i("mt-tab-container-item",{attrs:{id:"2"}},t._l(t.goodsList,function(s,e){return i("div",{key:"b_index",staticClass:"listcard",on:{click:function(i){t.toGoodsDetailtwo(s)}}},[i("div",{staticClass:"display_img"},[i("div",{staticClass:"img_box"},[i("router-link",{attrs:{to:{path:"/goodsDetail",query:{id:s.goods_id}}}},[i("img",{attrs:{src:s.image}})])],1),t._v(" "),i("div",{staticClass:"express"},[i("div",[1==s.is_special_sale?i("span",{staticClass:"special"},[t._v("特卖")]):t._e(),t._v(" "),i("router-link",{attrs:{to:{path:"/goodsDetail",query:{id:s.goods_id}}}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(s.goods_name)+"\n\t\t\t\t\t\t\t\t\t")])],1),t._v(" "),i("div",{staticClass:"price"},[i("span",[t._v("￥"+t._s(s.price)+"   ")]),i("span",[t._v("赚"+t._s(s.commission_price))]),t._v(" "),i("span",[t._v(t._s(s.store_count)+" 件")])])])])])})),t._v(" "),i("mt-tab-container-item",{attrs:{id:"3"}},t._l(t.goodsList,function(s,e){return i("div",{key:"c_index",staticClass:"listcard",on:{click:function(i){t.toGoodsDetailthree(s)}}},[i("div",{staticClass:"display_img"},[i("div",{staticClass:"img_box"},[i("img",{attrs:{src:s.image}})]),t._v(" "),i("div",{staticClass:"express"},[i("div",[1==s.is_special_sale?i("span",{staticClass:"special"},[t._v("特卖")]):t._e(),t._v(" "),i("router-link",{attrs:{to:{path:"/goodsDetail",query:{id:s.goods_id}}}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(s.goods_name)+"\n\t\t\t\t\t\t\t\t\t")])],1),t._v(" "),i("div",{staticClass:"price"},[i("span",[t._v("￥"+t._s(s.price)+"   ")]),i("span",[t._v("赚"+t._s(s.commission_price))]),t._v(" "),i("span",[t._v(t._s(s.store_count)+" 件")])])])])])}))],1)],1):t._e()]):t._e(),t._v(" "),i("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:t.loadBottom,expression:"loadBottom"}],staticClass:"load-bottom",attrs:{type:"triple-bounce"}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title"},[s("p",[this._v("热门搜索")])])}]};var n=i("VU/8")(c,r,!1,function(t){i("u+yz")},"data-v-b5f9c3c4",null);s.default=n.exports},"u+yz":function(t,s){}});