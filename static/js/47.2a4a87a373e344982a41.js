webpackJsonp([47],{"5m/5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"receiveAddress",data:function(){return{userName:"",popupVisible:!1,provinceName:"",cityName:"",areaName:"",provinceId:"",cityId:"",areaId:"",pName:"",cName:"",aName:"",getProvince:[],getCity:[],getArea:[],slots1:[{flex:1,values:[],className:"slot1",textAline:"left"}],slots2:[{flex:1,values:[],className:"slot2",textAlign:"center"}],slots3:[{flex:1,values:[],className:"slot3",textAline:"right"}],name:"",phone:"",detailAddress:"",orderId:""}},created:function(){this.userName=this.$route.query.nickname,this.orderId=this.$route.query.order_id},beforeMount:function(){document.title=this.$route.meta.title},mounted:function(){""==this.provinceName&&""==this.cityName&&""==this.areaName&&(this.provinceName="请选择地址")},methods:{openPicker:function(){var e=this;e.popupVisible=!0,e.popupVisible&&this.$axios({url:e.$store.state.api.address.detail_address,method:"get",params:{}}).then(function(t){var a=t.data;if(0==a.error){for(var s=0,i=a.data.length;s<i;s++)e.slots1[0].values.push(a.data[s].name);e.getProvince=a.data}}).catch(function(e){})},selectProvince:function(e,t){var a=this;for(var s in a.slots2[0].values=[],a.pName=e.getValues(t).join(","),a.getProvince)a.pName==a.getProvince[s].name&&(a.provinceId=a.getProvince[s].id);""!=a.provinceId&&0!=a.provinceId?a.$axios({url:a.$store.state.api.address.detail_address,method:"get",params:{parent_id:a.provinceId}}).then(function(e){var t=e.data;if(0==t.error){a.getCity=t.data;for(var s=0,i=t.data.length;s<i;s++)a.slots2[0].values.push(t.data[s].name)}}).catch(function(e){}):a.slots2[0].values=[],a.a=a.pName,a.provinceName=a.a},selectCity:function(e,t,a){var s=this;for(var i in s.slots3[0].values=[],s.cName=e.getValues(t).join(","),s.getCity)s.cName==s.getCity[i].name&&(s.cityId=s.getCity[i].id);""!=s.cityId&&0!=s.cityId&&s.$axios({url:s.$store.state.api.address.detail_address,method:"get",params:{parent_id:s.cityId}}).then(function(e){var t=e.data;if(0==t.error){s.getArea=t.data,s.slots3[0].values=[];for(var a=0,i=t.data.length;a<i;a++)s.slots3[0].values.push(t.data[a].name)}s.cityName=s.cName}).catch(function(e){})},selectArea:function(e,t){for(var a in this.aName=e.getValues(t).join(","),this.areaName=this.aName,0==this.slots2[0].values.length&&(this.slots3[0].values=[]),this.getArea)this.aName==this.getArea[a].name&&(this.areaId=this.getArea[a].id)},close:function(){this.popupVisible=!1,this.provinceName="请选择地址",this.cityName="",this.areaName=""},ok:function(e,t){this.popupVisible=!1},sub:function(){var e=this;e.$axios.post(e.$store.state.api.gifts.receiveAddress,{order_id:e.orderId,province:e.provinceId,city:e.cityId,district:e.areaId,address:e.detailAddress,consignee:e.name,mobile:e.phone}).then(function(t){var a=t.data;console.log(a,"r"),0==a.error&&(e.$toast(a.data),e.$router.push("/receiveok")),1==a.error&&e.$toast(a.error_msg)})},giftStatus:function(){var e=this;e.$axios({url:e.$store.state.api.gifts.receiveInfo,method:"get",params:{order_id:e.orderId,type:"card"}}).then(function(t){var a=t.data;console.log(a,"r"),0==a.error&&e.sub()})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"write"},[s("div",{staticClass:"header"},[e._v("你的微信好友"),s("span",[e._v(e._s(e.userName))]),e._v("送你一份礼盒，请填写您的收货地址")]),e._v(" "),s("div",{staticClass:"content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"收货人姓名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"number",placeholder:"联系方式"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e._v(" "),s("div",{on:{click:e.openPicker}},[e._v(e._s(e.provinceName)+e._s(e.cityName)+e._s(e.areaName)),s("i",{staticClass:"iconfont"},[e._v("")])]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.detailAddress,expression:"detailAddress"}],attrs:{type:"text",placeholder:"请填写详细地址"},domProps:{value:e.detailAddress},on:{input:function(t){t.target.composing||(e.detailAddress=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"receive-btn",on:{click:function(t){e.giftStatus()}}},[s("img",{attrs:{src:a("JRmQ"),width:"100%"}}),e._v(" "),s("span",[e._v("接受礼物")])]),e._v(" "),s("mt-popup",{attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[s("div",{staticClass:"handle"},[s("span",{staticClass:"close",on:{click:function(t){e.close()}}},[e._v("取消")]),e._v(" "),s("span",{staticClass:"on-ok",on:{click:function(t){e.ok()}}},[e._v("确定")])]),e._v(" "),s("mt-picker",{staticClass:"picker1",attrs:{slots:e.slots1},on:{change:e.selectProvince}}),e._v(" "),s("mt-picker",{staticClass:"picker2",attrs:{slots:e.slots2},on:{change:e.selectCity}}),e._v(" "),s("mt-picker",{staticClass:"picker3",attrs:{slots:e.slots3},on:{change:e.selectArea}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(e){a("h9Ig")},"data-v-9a358860",null);t.default=o.exports},h9Ig:function(e,t){}});