webpackJsonp([48],{cH4M:function(e,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t={name:"addressEdit",data:function(){return{skip:"",index:"",address_id:"",space:"",popupVisible:!1,choiceList:[{name:"请选择",is_select:"0",is_show:"0",id:""},{name:"请选择",is_select:"0",is_show:"0",id:""},{name:"请选择",is_select:"0",is_show:"0",id:""}],provinceList:[],cityList:[],areaList:[],userName:"",userPhone:"",provinceName:"",cityName:"",areaName:"",detailAddress:"",setDefault:"",selectTo:"",provinceId:"",cityId:"",areaId:"",curIndex:"",provinceTop:"",cityTop:"",areaTop:"",swiper:"",pScroll:"",addressInfo:""}},created:function(){this.address_id=this.$route.query.address_id,this.skip=this.$route.query.skip,this.index=this.$route.query.index,this.space=this.$route.query.spe},beforeMount:function(){document.title=this.$route.meta.title},mounted:function(){void 0!=this.address_id&&this.getAddress(),this.$nextTick(function(){this.initSwiper()})},methods:{initSwiper:function(){this.swiper=new Swiper(".swiper-container",{slidesPerView:"auto",centeredSlides:!0,paginationClickable:!0,allowTouchMove:!1})},openPicker:function(){var e=this;e.popupVisible=!0,e.choiceList[0].is_select=1,e.choiceList[0].is_show=1,e.$axios.get(e.$api.address_all).then(function(s){var i=s.data;console.log(i,"r"),0==i.code&&(e.addressInfo=e.provinceList=i.data,e.provinceList.map(function(s){e.$set(s,"is_select","0")}))})},toChoice:function(e,s){console.log(1),this.swiper.slideTo(s)},choiceP:function(e,s){for(var i=this,t=0;t<i.provinceList.length;t++)i.provinceList[t].is_select=0;e.is_select=1,i.cityList=e.rows,i.cityList.map(function(e){i.$set(e,"is_select","0")});for(var a=0;a<i.choiceList.length;a++)i.choiceList[a].is_select=0;i.choiceList[0].name=e.name,i.choiceList[1].name="请选择",i.choiceList[1].is_select=1,i.choiceList[1].is_show=1,i.choiceList[2].is_show=0,i.swiper.slideTo(1)},choiceC:function(e,s){for(var i=this,t=0;t<i.cityList.length;t++)i.cityList[t].is_select=0;e.is_select=1,i.$axios({url:i.$store.state.api.address.detail_address,method:"get",params:{parent_id:e.id}}).then(function(s){var t=s.data;if(0==t.error){i.areaList=t.data,i.areaList.map(function(e){i.$set(e,"is_select","0")});for(var a=0;a<i.choiceList.length;a++)i.choiceList[a].is_select=0;i.choiceList[1].name=e.name,i.choiceList[2].name="请选择",i.choiceList[2].is_select=1,i.choiceList[2].is_show=1,i.cityName=e.name,i.cityId=e.id,i.swiper.slideTo(2)}}).catch(function(e){})},choiceA:function(e,s){for(var i=this,t=0;t<i.areaList.length;t++)i.areaList[t].is_select=0;e.is_select=1,i.$axios({url:i.$store.state.api.address.detail_address,method:"get",params:{parent_id:e.id}}).then(function(s){0==s.data.error&&(i.choiceList[2].name=e.name,i.areaName=e.name,i.areaId=e.id,i.popupVisible=!1)}).catch(function(e){})},closePopup:function(){if(console.log(this.choiceList[2].id,"choiceid"),""==this.areaName){this.popupVisible=!1,this.provinceName="",this.cityName="",this.areaName="";for(var e=0;e<this.choiceList.length;e++)this.choiceList[e].is_select=0,this.choiceList[e].is_show=0;this.swiper.slideTo(0),console.log(this.choiceList,"choicelist")}else this.popupVisible=!1},getAddress:function(){var e=this;e.$axios({url:e.$store.state.api.address.get_detail_address,method:"get",params:{address_id:e.address_id}}).then(function(s){var i=s.data;0==i.error&&(e.userName=i.data.consignee,e.userPhone=i.data.mobile,e.provinceName=e.choiceList[0].name=i.data.province_name,e.cityName=e.choiceList[1].name=i.data.city_name,e.areaName=e.choiceList[2].name=i.data.district_name,e.detailAddress=i.data.address,e.setDefault=i.data.is_default,e.provinceId=e.choiceList[0].id=i.data.province,e.cityId=e.choiceList[1].id=i.data.city,e.areaId=e.choiceList[2].id=i.data.district)}).catch(function(e){})},setting:function(){this.setDefault=!this.setDefault,0==this.setDefault&&(this.setDefault=0),1==this.setDefault&&(this.setDefault=1)},save:function(){var e=this;e.detailAddress.length<5?e.$toast({message:"地址不得少于五个字",position:"center",duration:1e3}):""!=e.userName?this.$axios({url:0==e.skip?e.$store.state.api.address.update_address:e.$store.state.api.address.create_address,method:"post",params:{address_id:e.address_id,consignee:e.userName,mobile:e.userPhone.replace(/\\s/g,""),address:e.detailAddress,is_default:e.setDefault,province:e.provinceId,city:e.cityId,district:e.areaId}}).then(function(s){var i=s.data;0==i.error&&(e.$toast({message:"操作成功",position:"center",duration:700}),0==e.index&&e.$router.push({path:"/shipAddress",query:{spe:e.space,goods_id:e.$route.query.goods_id,goods_num:e.$route.query.goods_num,spec_key:e.$route.query.spec_key}}),1==e.index&&e.$router.push("/mineAddress")),1==i.error&&e.$toast({message:i.error_msg,position:"center",duration:700})}).catch(function(e){}):e.$toast({message:"请填写收获人姓名",position:"center",duration:1e3})},iscrollGo:function(e,s,i,t){var a=document.getElementById(s).children[i]||0,o=a.offsetTop,c=a.clientHeight,n=document.getElementById(e),r=n.clientHeight,d=o+c/2,l=40*t,u=l-r/3;if(d<r/2)n.scrollTop=0;else if(d>u)n.scrollTop=l;else{var p=d-r/2;n.scrollTop=p}}}},a={render:function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"user-info"},[i("div",{staticClass:"user-name",attrs:{height:"1rem"}},[i("label",[e._v("联系人：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text"},domProps:{value:e.userName},on:{input:function(s){s.target.composing||(e.userName=s.target.value)}}})]),e._v(" "),i("div",{staticClass:"user-phone"},[i("label",[e._v("联系方式：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],attrs:{type:"number"},domProps:{value:e.userPhone},on:{input:function(s){s.target.composing||(e.userPhone=s.target.value)}}})]),e._v(" "),i("div",{staticClass:"address",on:{click:function(s){e.openPicker()}}},[i("label",[e._v("所在地区：")]),i("span",[e._v(e._s(e.provinceName)+e._s(e.cityName)+e._s(e.areaName))]),i("i",{staticClass:"iconfont"},[e._v("")])]),e._v(" "),i("div",{staticClass:"detail-address"},[i("label",[e._v("详细地址：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.detailAddress,expression:"detailAddress"}],attrs:{type:"text",placeholder:"街道、门牌号等"},domProps:{value:e.detailAddress},on:{input:function(s){s.target.composing||(e.detailAddress=s.target.value)}}})]),e._v(" "),i("p",{staticClass:"default"},[1==e.setDefault?i("i",{staticClass:"iconfont",staticStyle:{color:"#cc3737"},on:{click:function(s){e.setting()}}},[e._v("")]):e._e(),e._v(" "),1!=e.setDefault?i("i",{staticClass:"iconfont",on:{click:function(s){e.setting()}}},[e._v("")]):e._e(),e._v(" "),i("span",[e._v("设为默认地址")])]),e._v(" "),i("button",{staticClass:"save",on:{click:function(s){e.save()}}},[e._v("保存")]),e._v(" "),i("mt-popup",{staticClass:"select",attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(s){e.popupVisible=s},expression:"popupVisible"}},[i("div",{staticClass:"content"},[i("div",{staticClass:"select-top"},[e._v("配送至"),i("i",{staticClass:"iconfont",on:{click:function(s){e.closePopup()}}},[e._v("")])]),e._v(" "),i("div",{staticClass:"is-choice"},e._l(e.choiceList,function(s,t){return i("p",{directives:[{name:"show",rawName:"v-show",value:1==s.is_show,expression:"choice.is_show == 1"}],key:"index",on:{click:function(i){e.toChoice(s,t)}}},[e._v("\n                    "+e._s(s.name)),i("span",{directives:[{name:"show",rawName:"v-show",value:1==s.is_select,expression:"choice.is_select == 1"}]})])})),e._v(" "),i("div",{staticClass:"swiper-container"},[i("div",{staticClass:"swiper-wrapper"},[i("div",{staticClass:"swiper-slide"},[i("div",{attrs:{id:"province"}},[i("ul",{attrs:{id:"pUl"}},e._l(e.provinceList,function(s,t){return i("li",{key:"indexp",class:[1==s.is_select?"red":""],on:{click:function(i){e.choiceP(s,t)}}},[e._v("\n                                    "+e._s(s.name)+"\n                                ")])}))])]),e._v(" "),i("div",{staticClass:"swiper-slide"},[i("div",{attrs:{id:"city"}},[i("ul",{attrs:{id:"cUl"}},e._l(e.cityList,function(s,t){return i("li",{key:"indexc",class:[1==s.is_select?"red":""],on:{click:function(i){e.choiceC(s,t)}}},[e._v("\n                                    "+e._s(s.name)+"\n                                ")])}))])]),e._v(" "),i("div",{staticClass:"swiper-slide"},[i("div",{attrs:{id:"area"}},[i("ul",{attrs:{id:"aUl"}},e._l(e.areaList,function(s,t){return i("li",{key:"indexa",class:[1==s.is_select?"red":""],on:{click:function(i){e.choiceA(s,t)}}},[e._v("\n                                    "+e._s(s.name)+"\n                                ")])}))])])])])])])],1)},staticRenderFns:[]};var o=i("VU/8")(t,a,!1,function(e){i("mAq/")},"data-v-9813b814",null);s.default=o.exports},"mAq/":function(e,s){}});