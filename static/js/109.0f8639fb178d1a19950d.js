webpackJsonp([109],{"1SgU":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=i("bOdI"),s=i.n(o),a={name:"order",data:function(){return{bDisabled:!1,slot1:!1,slot2:!1,slot3:!1,slots1:[{flex:1,values:[],className:"slot1",textAlign:"center"}],slots2:[{flex:1,values:[],className:"slot2",textAlign:"center"}],slots3:[{flex:1,values:[],className:"slot3",textAlign:"center"}],getProvnice:[],provinceId:"",getCity:[],cityId:"",getArea:[],areaId:"",popupVisible:!1,price:"",form:[{ipt_register_name:"",ipt_register_phone:"",ipt_register_code:"",ipt_receive_name:"",ipt_receive_phone:"",ipt_receive_province:"",ipt_receive_city:"",ipt_receive_area:"",ipt_receive_detailMassage:"",fullcircle:!0}],finsh:!0,maxlength:"11",wait:60,getCodeValue:"发送验证码",addressList:[],orderMsg:{goods_id:this.$route.query.id,goods_num:this.$route.query.num,goods_spec:this.$route.query.key,address_id:this.$route.query.siteid},receivePhone:!1,AllInfo:[],useCouponId:"",userPhone:"",popupWarn:!1,popupProtocol:!1}},components:{protocolstore:i("WcDb").default},beforeMount:function(){document.title=this.$route.meta.title},created:function(){this.price=this.$route.query.price,this.mobile=this.$route.query.mobile,this.storename=this.$route.query.storename,void 0!=this.storename&&(this.form[0].ipt_register_name=this.storename),void 0!=this.mobile&&(this.form[0].ipt_register_phone=this.mobile)},mounted:function(){this.getUserPhone()},methods:(r={selectCancel:function(){this.popupVisible=!1,this.slot1=!1,this.slot2=!1,this.slot3=!1},selectSure:function(){this.popupVisible=!1,this.slot1=!1,this.slot2=!1,this.slot3=!1},onValuesPChange:function(e,t){this.form[0].ipt_receive_province=e.getValues(t),this.form[0].ipt_receive_province=this.form[0].ipt_receive_province.join()},onValuesCChange:function(e,t){this.form[0].ipt_receive_city=e.getValues(t),this.form[0].ipt_receive_city=this.form[0].ipt_receive_city.join()},onValuesAChange:function(e,t){this.form[0].ipt_receive_area=e.getValues(t),this.form[0].ipt_receive_area=this.form[0].ipt_receive_area.join()},Preverify:function(e){1==e.target._value.substring(0,1)?this.maxlength="11":e.target._value.length>=1&&(this.maxlength="1",this.$toast({message:"手机号码首位不为1",position:"center",duration:1500}))},registerSubmitCheck:function(){var e=this,t=e.form[0].ipt_register_phone,i=e.form[0].ipt_register_code,r=e.form[0].ipt_register_name,o=e.form[0].ipt_receive_phone,s=e.form[0].ipt_receive_name,a=e.form[0].ipt_receive_province,n=e.form[0].ipt_receive_city,c=e.form[0].ipt_receive_area,p=e.form[0].ipt_receive_detailMassage;if(t=t.replace(/(^\s+)|(\s+$)/g,""),i=i.replace(/(^\s+)|(\s+$)/g,""),o=o.replace(/(^\s+)|(\s+$)/g,""),""==t||"undefined"==t||""==i||"undefined"==i||""==r||"undefined"==r||""==s||"undefined"==s||""==a||"undefined"==a||""==n||"undefined"==n||""==c||"undefined"==c||""==p||"undefined"==p){e.finsh=!1;var _=setTimeout(function(){e.finsh=!0,clearTimeout(_)},2e3);return!1}return""==e.form[0].ipt_receive_phone||void 0==e.form[0].ipt_receive_phone?(e.$toast({message:"请输入手机号",position:"center",duration:1500}),e.receivePhone=!0,!1):/^1[34578]\d{9}$/.test(e.form[0].ipt_receive_phone)?void(e.form.fullcircle?e.orderCreate():e.$toast({message:"请阅读条款",position:"center",duration:1500})):(e.$toast({message:"手机号有误",position:"center",duration:1500}),e.receivePhone=!0,!1)},getHttp:function(){this.$axios({method:"post",url:this.$store.state.api.order.store_create,params:{}}).then(function(e){orderCreate()}).catch(function(e){}),this.finsh=!0},time:function(){var e=this;0==e.wait?(e.getCodeValue="获取验证码",document.getElementById("codes").style.background="rgb(178, 159, 116)",document.getElementById("codes").style.color="#fff",e.wait=60,e.bDisabled=!1):(e.bDisabled=!0,e.getCodeValue="请等待"+e.wait+"s",e.wait--,setTimeout(function(){e.time()},1e3))},colorChange:function(e){this.form.fullcircle=!0,this.form.fullcircle?(e.path[0].style.background="red",e.path[0].innerHTML=""):e.path[0].style.background="white"},getCode:function(e){var t=this;t.form[0].ipt_receive_phone=t.form[0].ipt_register_phone,t.form[0].ipt_receive_name=t.form[0].ipt_register_name,""==t.form[0].ipt_register_phone||void 0==t.form[0].ipt_register_phone?t.$toast({message:"请输入手机号",position:"center",duration:1500}):/^1[34578]\d{9}$/.test(t.form[0].ipt_register_phone)?(t.$axios({method:"post",url:t.$store.state.api.order1.send_sms_code,params:{mobile:t.form[0].ipt_register_phone}}).then(function(i){0==i.data.error&&(e.path[0].style.background="#e7e7e7",e.path[0].style.color="#c2c2c2",t.time()),1==i.data.error&&t.$toast({message:i.data.error_msg,position:"center",duration:1500})}).catch(function(e){}),t.finsh=!0):t.$toast({message:"手机号有误",position:"center",duration:1500})},getProvince:function(e){var t=this;document.activeElement.blur(),t.popupVisible=!0,t.finsh=!0,t.slot1=!0,t.form[0].ipt_receive_city="",t.form[0].ipt_receive_area="",t.$axios({method:"get",dataType:"json",url:t.$store.state.api.order1.get_provinces,params:{}}).then(function(e){for(var i in t.getProvnice=e.data.data,t.getProvnice)t.slots1[0].values.push(t.getProvnice[i].name)}).catch(function(e){})},getCitys:function(e){var t=this;if(document.activeElement.blur(),t.finsh=!0,t.slot2=!0,t.slot1=!1,t.slot3=!1,t.form[0].ipt_receive_city="",t.form[0].ipt_receive_area="",t.getCity=[],t.provinceId="",t.slots2[0].values=[],""==t.form[0].ipt_receive_province||"underfined"==t.form[0].ipt_receive_province)t.$toast({message:"请输入省区",position:"center",duration:1500});else{for(var i in t.popupVisible=!0,t.getProvnice)t.form[0].ipt_receive_province==t.getProvnice[i].name&&(t.provinceId=t.getProvnice[i].id);t.$axios({method:"get",dataType:"json",url:t.$store.state.api.order1.get_cities,params:{province_id:t.provinceId}}).then(function(e){if(0==e.data.error){for(var i in t.getCity=[],t.getCity=e.data.data,t.getCity)t.slots2[0].values.push(t.getCity[i].name);t.addressList.push(t.form[0].ipt_receive_province)}}).catch(function(e){})}},getAreas:function(e){document.activeElement.blur();var t=this;if(t.finsh=!0,t.slot3=!0,t.slot1=!1,t.slot2=!1,t.form[0].ipt_receive_area="",t.slots3[0].values=[],t.cityId="",""==t.form[0].ipt_receive_province||"underfined"==t.form[0].ipt_receive_province)t.$toast({message:"请输入省区",position:"center",duration:1500});else if(""==t.form[0].ipt_receive_city||"underfined"==t.form[0].ipt_receive_city)t.$toast({message:"请输入市区",position:"center",duration:1500});else{for(var i in t.popupVisible=!0,t.getCity)t.form[0].ipt_receive_city==t.getCity[i].name&&(t.cityId=t.getCity[i].id);t.$axios({method:"get",dataType:"json",url:t.$store.state.api.order1.get_areas,params:{city_id:t.cityId}}).then(function(e){if(0==e.data.error)for(var i in t.getArea=[],t.getArea=e.data.data,t.getArea)t.slots3[0].values.push(t.getArea[i].name)}).catch(function(e){})}},getAllArea:function(){""!=this.form[0].ipt_receive_area&&"underfined"!=this.form[0].ipt_receive_area||this.$toast({message:"请输入地区",position:"center",duration:1500})},orderCreate:function(){for(var e in this.getArea)if(this.form[0].ipt_receive_area==this.getArea[e].name){for(var e in this.areaId=this.getArea[e].id,this.getArea=res.data.data,this.getArea)this.slots3[0].values.push(this.getArea[e].name);this.addressList.push(this.form[0].ipt_receive_city),this.addressList.push(this.form[0].ipt_receive_area)}}},s()(r,"getAllArea",function(){""!=this.form[0].ipt_receive_area&&"underfined"!=this.form[0].ipt_receive_area||this.$toast({message:"请输入地区",position:"center",duration:1500})}),s()(r,"getUserPhone",function(){var e=this;e.$axios({url:e.$store.state.api.getUserInfo,method:"get",params:{}}).then(function(t){var i=t.data;console.log(i,"r1"),0==i.error&&(e.userPhone=i.data.mobile)})}),s()(r,"orderCreate",function(){var e=this;for(var t in e.getArea)e.form[0].ipt_receive_area==e.getArea[t].name&&(e.areaId=e.getArea[t].id);var i=new Object;e.form[0].ipt_register_name,e.form[0].ipt_register_phone,e.form[0].ipt_register_code;i.phone=e.form[0].ipt_receive_phone,i.name=e.form[0].ipt_receive_name,i.province=e.provinceId,i.city=e.cityId,i.area=e.areaId,i.address=e.form[0].ipt_receive_detailMassage,""!=i.address&&""!=i.area&&""!=i.city&&""!=i.name&&""!=i.phone&&""!=i.province?""!=e.userPhone&&e.userPhone!=e.form[0].ipt_register_phone?e.popupWarn=!0:e.$axios({url:e.$store.state.api.order1.checkCode,method:"get",params:{mobile:e.form[0].ipt_register_phone,code:e.form[0].ipt_register_code}}).then(function(t){0==t.data.error&&e.$router.push({path:"invoice",query:{price:e.price,goods_id:e.orderMsg.goods_id,goods_num:e.orderMsg.goods_num,storename:e.form[0].ipt_register_name,store_mobile:e.form[0].ipt_register_phone,address:i,goods_spec:e.orderMsg.goods_spec,user_coupon_id:e.useCouponId}}),1==t.data.error&&e.$toast(t.data.error_msg)}):e.$toast("请完整填写收货人信息")}),s()(r,"closeWarn",function(){this.popupWarn=!1}),s()(r,"goonCreat",function(){var e=this;for(var t in e.getArea)e.form[0].ipt_receive_area==e.getArea[t].name&&(e.areaId=e.getArea[t].id);var i=new Object;e.form[0].ipt_register_name,e.form[0].ipt_register_phone,e.form[0].ipt_register_code;i.phone=e.form[0].ipt_receive_phone,i.name=e.form[0].ipt_receive_name,i.province=e.provinceId,i.city=e.cityId,i.area=e.areaId,i.address=e.form[0].ipt_receive_detailMassage,e.$axios({url:e.$store.state.api.order1.checkCode,method:"get",params:{mobile:e.form[0].ipt_register_phone,code:e.form[0].ipt_register_code}}).then(function(t){0==t.data.error&&e.$router.push({path:"invoice",query:{price:e.price,goods_id:e.orderMsg.goods_id,goods_num:e.orderMsg.goods_num,storename:e.form[0].ipt_register_name,store_mobile:e.form[0].ipt_register_phone,address:i,goods_spec:e.orderMsg.goods_spec,user_coupon_id:e.useCouponId}}),1==t.data.error&&e.$toast(t.data.error_msg)})}),s()(r,"goPay",function(e){for(var t in this.getArea)this.form[0].ipt_receive_area==this.getArea[t].name&&(this.areaId=this.getArea[t].id);this.registerSubmitCheck()}),s()(r,"toProtocol",function(){this.$router.push("/protocolstore")}),r)},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order"},[i("div",{staticClass:"order_content"},[e._m(0),e._v(" "),i("section",[i("div",{staticClass:"register_form"},[i("div",{staticClass:"register_name"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_register_name,expression:"form[0].ipt_register_name"}],staticStyle:{"font-size":"0.28rem"},attrs:{id:"register_name",type:"text",placeholder:"店主姓名"},domProps:{value:e.form[0].ipt_register_name},on:{click:function(t){e.finsh=!0},input:function(t){t.target.composing||e.$set(e.form[0],"ipt_register_name",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"register_phone"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_register_phone,expression:"form[0].ipt_register_phone"}],staticClass:"register-phone",staticStyle:{"font-size":"0.28rem"},attrs:{type:"tel",name:"",maxlength:e.maxlength,id:"register_phone",placeholder:"登录手机"},domProps:{value:e.form[0].ipt_register_phone},on:{keyup:function(t){e.Preverify(t)},click:function(t){e.finsh=!0},input:function(t){t.target.composing||e.$set(e.form[0],"ipt_register_phone",t.target.value)}}}),e._v(" "),i("button",{staticClass:"get_verify_code",staticStyle:{background:"#B29F74"},attrs:{disabled:e.bDisabled,id:"codes"},on:{click:function(t){e.getCode(t)}}},[e._v(e._s(e.getCodeValue))])]),e._v(" "),i("div",{staticClass:"register_code"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_register_code,expression:"form[0].ipt_register_code"}],staticClass:"verify_code",staticStyle:{"font-size":"0.28rem"},attrs:{id:"register_code",type:"text",placeholder:"验证码"},domProps:{value:e.form[0].ipt_register_code},on:{input:function(t){t.target.composing||e.$set(e.form[0],"ipt_register_code",t.target.value)}}})])]),e._v(" "),e._m(1),e._v(" "),i("div",{staticClass:"receive_people"},[i("div",{staticClass:"receive_name"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_receive_name,expression:"form[0].ipt_receive_name"}],staticStyle:{"font-size":"0.28rem"},attrs:{id:"receive_name",type:"text",placeholder:"收货人姓名"},domProps:{value:e.form[0].ipt_receive_name},on:{click:function(t){e.finsh=!0},input:function(t){t.target.composing||e.$set(e.form[0],"ipt_receive_name",t.target.value)}}}),e._v(" "),e.finsh?e._e():i("div",{staticClass:"tip"},[e._v("未填完信息")])]),e._v(" "),i("div",{staticClass:"receive_phone"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_receive_phone,expression:"form[0].ipt_receive_phone"}],staticClass:"receive-phone",attrs:{type:"tel",name:"",maxlength:e.maxlength,id:"receive_phone",placeholder:"收货人手机"},domProps:{value:e.form[0].ipt_receive_phone},on:{keyup:function(t){e.Preverify(t)},click:function(t){e.finsh=!0},input:function(t){t.target.composing||e.$set(e.form[0],"ipt_receive_phone",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"receive_province",on:{click:function(t){e.getProvince(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_receive_province,expression:"form[0].ipt_receive_province"}],staticClass:"verify_code",attrs:{readonly:"readonly",id:"receive_province",placeholder:"所在省"},domProps:{value:e.form[0].ipt_receive_province},on:{input:function(t){t.target.composing||e.$set(e.form[0],"ipt_receive_province",t.target.value)}}}),i("i",{staticClass:"iconfont"},[e._v("")])]),e._v(" "),i("div",{staticClass:"receive_city",on:{click:function(t){e.getCitys(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_receive_city,expression:"form[0].ipt_receive_city"}],staticClass:"verify_code",attrs:{readonly:"readonly",id:"receive_city",type:"text",placeholder:"所在市"},domProps:{value:e.form[0].ipt_receive_city},on:{input:function(t){t.target.composing||e.$set(e.form[0],"ipt_receive_city",t.target.value)}}}),i("i",{staticClass:"iconfont"},[e._v("")])]),e._v(" "),i("div",{staticClass:"receive_area",on:{click:function(t){e.getAreas(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_receive_area,expression:"form[0].ipt_receive_area"}],staticClass:"verify_code",attrs:{readonly:"readonly",id:"receive_area",type:"text",placeholder:"所在区"},domProps:{value:e.form[0].ipt_receive_area},on:{input:function(t){t.target.composing||e.$set(e.form[0],"ipt_receive_area",t.target.value)}}}),i("i",{staticClass:"iconfont"},[e._v("")])]),e._v(" "),i("div",{staticClass:"receive_detailMassage"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form[0].ipt_receive_detailMassage,expression:"form[0].ipt_receive_detailMassage"}],staticClass:"verify_code",staticStyle:{"font-size":"0.28rem"},attrs:{id:"receive_detailMassage",type:"text",placeholder:"详细地址"},domProps:{value:e.form[0].ipt_receive_detailMassage},on:{input:function(t){t.target.composing||e.$set(e.form[0],"ipt_receive_detailMassage",t.target.value)}}})])])]),e._v(" "),i("mt-popup",{staticClass:"popup",attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[i("div",{staticClass:"select"},[i("div",{staticClass:"select_cancel",on:{click:e.selectCancel}},[e._v("取消")]),e._v(" "),i("div",{staticClass:"select_sure",on:{click:e.selectSure}},[e._v("确定")])]),e._v(" "),e.slot1?i("mt-picker",{attrs:{slots:e.slots1},on:{change:e.onValuesPChange}}):e._e(),e._v(" "),e.slot2?i("mt-picker",{attrs:{slots:e.slots2},on:{change:e.onValuesCChange}}):e._e(),e._v(" "),e.slot3?i("mt-picker",{attrs:{slots:e.slots3},on:{change:e.onValuesAChange}}):e._e()],1),e._v(" "),i("div",{staticClass:"ticket"},[i("i",{staticClass:"circle"}),e._v(" "),i("p",[e._v("我已阅读并同意"),i("span",{on:{click:function(t){e.popupProtocol=!0}}},[e._v("《安厨技术服务协议》")])])])],1),e._v(" "),i("footer",[i("div",{staticClass:"footLeft"},[i("span",[e._v("实付:")]),e._v(" "),i("div",{staticClass:"payNumber"},[i("i",{staticClass:"tubiao"}),i("em",[e._v("¥"+e._s(e.price))])])]),e._v(" "),i("div",{staticClass:"footRight",on:{click:e.orderCreate}},[e._v("去付款")])]),e._v(" "),i("mt-popup",{attrs:{"popup-transition":"popup-fade",closeOnClickModal:""},model:{value:e.popupWarn,callback:function(t){e.popupWarn=t},expression:"popupWarn"}},[i("div",{staticClass:"userHandle"},[i("p",[e._v("提示")]),e._v(" "),i("p",[e._v("注册成为店主手机号与账号绑定手机号不一致，是否要将绑定手机更换为当前输入手机号？")]),e._v(" "),i("div",[i("span",{on:{click:function(t){e.closeWarn()}}},[e._v("否")]),e._v(" "),i("span",{on:{click:function(t){e.goonCreat()}}},[e._v("是")])])])]),e._v(" "),i("mt-popup",{staticClass:"popupone",attrs:{position:"right"},model:{value:e.popupProtocol,callback:function(t){e.popupProtocol=t},expression:"popupProtocol"}},[i("div",{staticClass:"content"},[i("i",{staticClass:"iconfont",on:{click:function(t){e.popupProtocol=!1}}},[e._v("")]),e._v(" "),i("protocolstore")],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("div",{staticClass:"header"},[t("div",{staticClass:"dlot"}),this._v(" "),t("div",[this._v("欢迎申请成为安厨店主,请输入您真实姓名和登录手机")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"middle"},[t("div",{staticClass:"dlot"}),this._v(" "),t("div",[this._v("为了保证您能及时收到该商品，请填写您的收货地址")])])}]};var c=i("VU/8")(a,n,!1,function(e){i("39HC")},"data-v-12421b22",null);t.default=c.exports},"39HC":function(e,t){}});