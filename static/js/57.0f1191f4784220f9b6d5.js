webpackJsonp([57],{Copp:function(t,s){},mm0g:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("Au9i"),n={name:"mygifts",data:function(){return{aNavList:[{select:!0,info:"我送出的",type:"send"},{select:!1,info:"我收到的",type:"get"}],listType:"",index:sessionStorage.getItem("mygiftsIndex")||0,giftsList:"",showHasget:!0,status:""}},beforeMount:function(){document.title=this.$route.meta.title},mounted:function(){this.cutState(this.index)},methods:{cutState:function(t){for(var s=0,e=this.aNavList.length;s<e;s++)this.aNavList[s].select=!1;this.aNavList[t].select=!0,this.listType=this.aNavList[t].type,this.status=t,sessionStorage.setItem("mygiftsIndex",t),this.getGiftsList()},getGiftsList:function(){var t=this;this.$axios({url:t.$store.state.api.gifts.mygifts+"&order[present_id]=desc",method:"get",params:{type:t.listType,page:1,page_count:100}}).then(function(s){var e=s.data;0==e.error&&(console.log(e,"r"),t.giftsList=e.data.rows,0==e.data.rows.length?t.showHasget=!1:t.showHasget=!0)})},cancelOrder:function(t){var s=this;Object(o.MessageBox)({showCancelButton:!0,cancelButtonText:"算了",confirmButtonText:"真的"}),o.MessageBox.confirm("真的要抛弃我吗?").then(function(e){var o=s;0==t.order_status&&o.$axios({url:o.$store.state.api.order.cancel_order,method:"post",params:{order_sn:t.order_sn}}).then(function(s){var e=s.data;console.log(e,"r"),0==e.error&&(o.$toast({message:"订单取消成功",position:"center",duration:1e3}),t.order_status_name="已取消",o.getGiftsList()),1==e.error&&o.$toast({message:e.error_msg,position:"center",duration:1e3})}),1==t.order_status&&0==t.is_handle&&o.$axios({url:o.$store.state.api.gifts.gift_cancel_order,method:"post",params:{order_sn:t.order_sn}}).then(function(s){var e=s.data;console.log(e,"r"),0==e.error&&(o.$toast({message:"订单取消成功",position:"center",duration:1e3}),t.order_status_name="已取消",o.getGiftsList()),1==e.error&&o.$toast({message:e.error_msg,position:"center",duration:1e3})})})},toGetdetail:function(t){0==this.status&&this.$router.push({path:"/giftsorderdetail",query:{order_sn:t.order_sn,order_status_name:t.order_status_name,type:"send"}}),1==this.status&&this.$router.push({path:"/giftsorderdetail",query:{order_sn:t.order_sn,order_status_name:t.order_status_name,type:"get"}})},toMyOrder:function(t){this.$router.push({path:"orderdetail",query:{order_sn:t.order_sn}})},toSend:function(t){this.$router.push({path:"/giftpayok",query:{order_id:t.order_id}})},toPay:function(t){this.$router.push({path:"/pay",query:{order_sn:t.order_sn,pay_type:"gift"}})}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mygifts"},[e("ul",t._l(t.aNavList,function(s,o){return e("li",{class:[{"w-active":s.select}],on:{click:function(s){t.cutState(o)}}},[t._v(t._s(s.info))])})),t._v(" "),e("div",{staticClass:"send-or-receive"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.showHasget,expression:"showHasget == false"}],staticStyle:{"font-size":"0.4rem",color:"#ccc","margin-top":"5rem","text-align":"center"}},[t._v("\n                您暂时还没有参与此活动哦~\n            ")]),t._v(" "),t._l(t.giftsList,function(s){return e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.showHasget,expression:"showHasget == true"}],staticClass:"content"},[0==t.status?e("div",{staticClass:"content-top"},[e("span",[t._v("订单编号："+t._s(s.order_sn))]),t._v(" "),e("span",[t._v(t._s(s.order_status_name))])]):t._e(),t._v(" "),1==t.status?e("div",{staticClass:"get-content-top"},[t._v("\n                    送礼人："),e("span",{staticStyle:{color:"#EF7C3E"}},[t._v(t._s(s.send_user_nickname))])]):t._e(),t._v(" "),"1"==s.goods_list.length?e("div",{staticClass:"goods-info-one",on:{click:function(e){t.toGetdetail(s)}}},[e("img",{attrs:{src:s.goods_list[0].goods_img}}),t._v(" "),e("div",[e("p",[t._v(t._s(s.goods_list[0].goods_name))]),t._v(" "),e("p",[e("span",[t._v(t._s(s.goods_list[0].spec_key_name))]),t._v(" "),e("span",[t._v("×"+t._s(s.goods_list[0].goods_num))])])])]):t._e(),t._v(" "),"1"!=s.goods_list.length?e("div",{staticClass:"goods-info-more",on:{click:function(e){t.toGetdetail(s)}}},[e("div",t._l(s.goods_list,function(t){return e("img",{attrs:{src:t.goods_img}})}))]):t._e(),t._v(" "),0==t.status?e("div",{staticClass:"handle"},[t._v("\n                    实付: \n                    "),e("span",[t._v("￥"+t._s(s.order_amount))]),t._v(" "),0==s.order_status?e("button",{on:{click:function(e){t.toPay(s)}}},[t._v("去支付")]):t._e(),t._v(" "),1==s.order_status&&1==s.is_handle?e("button",{on:{click:function(s){t.toMyOrder()}}},[t._v("订单详情")]):t._e(),t._v(" "),0==s.order_status||1==s.order_status&&0==s.is_handle?e("button",{on:{click:function(e){t.cancelOrder(s)}}},[t._v("取消订单")]):t._e(),t._v(" "),1==s.order_status&&0==s.is_handle?e("button",{on:{click:function(e){t.toSend(s)}}},[t._v("立即送出")]):t._e()]):t._e(),t._v(" "),1==t.status?e("div",{staticClass:"handle-get"},[e("button",{on:{click:function(e){t.toGetdetail(s)}}},[t._v("礼包详情")])]):t._e()])})],2)])},staticRenderFns:[]};var a=e("VU/8")(n,r,!1,function(t){e("Copp")},"data-v-6a3c17ee",null);s.default=a.exports}});