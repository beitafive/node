webpackJsonp([33],{"9dC8":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("bOdI"),a=s.n(o),i={name:"classifyGoods",data:function(){var t;return t={topStatus:"",sortMenu:["限时购","站点推荐"],upStore:!0},a()(t,"topStatus",""),a()(t,"earnMoney",""),a()(t,"price",""),a()(t,"goodsId",this.$route.query.id),a()(t,"classifygoods",[]),a()(t,"empty",!0),a()(t,"sortMenu1",[]),a()(t,"sortMenu",[]),a()(t,"sortName1",[]),a()(t,"sortName",[]),a()(t,"showTop",!1),a()(t,"scrollTop",""),a()(t,"allPage",""),a()(t,"orderPage",""),a()(t,"loadBottom",""),a()(t,"notMore",!1),a()(t,"loading",""),a()(t,"banner",""),a()(t,"priceSort",!1),a()(t,"types",""),a()(t,"sortStatus",""),a()(t,"selected",[{is_selected:1},{is_selected:0},{is_selected:0},{is_selected:0}]),t},beforeMount:function(){this.listid=sessionStorage.goodsNum,document.title=this.$route.meta.title},computed:{list:function(){return this.$store.getters.getgoodslist}},watch:{scrollTop:{handler:function(t,e){}}},mounted:function(){var t=this;t.share(),document.body.style.position="relative",t.$nextTick(function(){window.addEventListener("scroll",t.touchstart)})},methods:{share:function(){var t=this;wx.ready(function(){wx.onMenuShareTimeline({title:t.$store.state.from_store.title,link:"https://wd-user.hzanchu.com/api.php?s=user/login/auth&_store_id="+t.$store.state.user_store_id,imgUrl:"http://oqv1x258g.bkt.clouddn.com/logo.png"}),wx.onMenuShareAppMessage({title:t.$store.state.from_store.title,desc:"只有好看的人，才能看得到这个店铺！",link:"https://wd-user.hzanchu.com/api.php?s=user/login/auth&_store_id="+t.$store.state.user_store_id,imgUrl:"http://oqv1x258g.bkt.clouddn.com/logo.png",type:"link"})})},toGoodsDetail:function(t){this.$router.push({path:"/goodsdetail",query:{id:t.goods_id}})},toTop:function(){window.scrollTo(0,0)},touchstart:function(){this.scrollTop=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,this.scrollTop>350?this.showTop=!0:this.showTop=!1},handleTopChange:function(t){},collection:function(t){var e=this;t.is_collect=!t.is_collect,t.is_collect&&e.$axios({method:"get",url:e.$store.state.api.keeperSelect.collection,params:{goods_id:t.goods_id}}).then(function(t){0==t.data.error&&e.$toast({message:"收藏成功",position:"center",duration:1e3})}).catch(function(t){}),t.is_collect||e.$axios({method:"get",url:e.$store.state.api.keeperSelect.Rcollection,params:{goods_id:t.goods_id}}).then(function(t){0==t.data.error&&e.$toast({message:"收藏已取消",position:"center",duration:1e3})}).catch(function(t){})},getList:function(){var t=this;t.$axios({method:"get",url:t.$store.state.api.classifyGoods.classify,params:{page:t.$store.state.classifyPage,cat_id:t.$store.state.classifyId,pagecount:10,sort:t.types,sort_asc:t.sortStatus}}).then(function(e){var s=e.data;0==s.error&&(t.$store.dispatch("setgoodslist",s.data.goods_arr),t.allPage=e.data.data.count,t.orderPage=Math.ceil(t.allPage/10))})},sortType:function(t){var e=this;e.$store.state.classifyPage="1",e.$store.state.goodsNum=[],e.types=t;for(var s=0;s<e.selected.length;s++)e.selected[s].is_selected=0;""==t&&(e.selected[0].is_selected=1),"sales_sum"==t&&(e.selected[1].is_selected=1),"price"==t&&(e.selected[2].is_selected=1),"goods_id"==t&&(e.selected[3].is_selected=1),"price"==t&&(e.priceSort=!e.priceSort),0==e.priceSort&&"price"==t&&(e.sortStatus="asc"),1==e.priceSort&&"price"==t&&(e.sortStatus="desc"),"sales_sum"!=t&&"goods_id"!=t||(e.sortStatus="desc"),""==t&&(e.sortStatus=""),e.$axios({method:"get",url:e.$store.state.api.classifyGoods.classify,params:{page:e.$store.state.classifyPage,cat_id:e.$store.state.classifyId,pagecount:10,sort:e.types,sort_asc:e.sortStatus}}).then(function(t){var s=t.data;0==s.error&&(e.$store.dispatch("setgoodslist",s.data.goods_arr),e.allPage=t.data.data.count,e.orderPage=Math.ceil(e.allPage/10))})},loadMore:function(){var t=this;if(t.$store.state.classifyPage>=t.$store.state.orderPage)return t.loadBottom=!1,void(t.notMore=!0);t.loadBottom=!0,t.notMore=!1,t.loading=!0,setTimeout(function(){t.$store.state.classifyPage<t.$store.state.orderPage&&(t.loading=!1,t.$store.state.classifyPage++,t.getList())},2e3)},toBannerLink:function(){""!=this.$store.state.catLink&&(window.location.href=this.$store.state.catLink)}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"contents"},[t.empty?t._e():o("div",{staticClass:"noGoods"},[o("div",[t._v("没有相关商品，看看别的吧！")])]),t._v(" "),o("div",{staticClass:"Store"},[o("div",{staticClass:"siteGoodsList"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.$store.state.catBanner,expression:"$store.state.catBanner"}],staticStyle:{width:"100%",height:"2.8rem"},on:{click:function(e){t.toBannerLink()}}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollTop>=170,expression:"scrollTop>=170"}],staticClass:"goods-sort",staticStyle:{position:"fixed",top:"0.8rem",left:"0","z-index":"2000",margin:"0","box-shadow":"0 0.1rem 0.3rem #ccc"}},[o("p",{class:1==t.selected[0].is_selected?"changeClor":"",on:{click:function(e){t.sortType("")}}},[t._v("综合")]),t._v(" "),o("p",{class:1==t.selected[1].is_selected?"changeClor":"",on:{click:function(e){t.sortType("sales_sum")}}},[t._v("销量")]),t._v(" "),o("p",{class:1==t.selected[2].is_selected?"changeClor":"",on:{click:function(e){t.sortType("price")}}},[t._v("价格\n\t\t\t\t\t"),o("img",{directives:[{name:"show",rawName:"v-show",value:0==t.priceSort,expression:"priceSort == 0"}],attrs:{src:s("v77k")}}),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:1==t.priceSort,expression:"priceSort == 1"}],attrs:{src:s("v77k")}})]),t._v(" "),o("p",{class:1==t.selected[3].is_selected?"changeClor":"",on:{click:function(e){t.sortType("goods_id")}}},[t._v("新品")])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollTop<170,expression:"scrollTop<170"}],staticClass:"goods-sort"},[o("p",{class:1==t.selected[0].is_selected?"changeClor":"",on:{click:function(e){t.sortType("")}}},[t._v("综合")]),t._v(" "),o("p",{class:1==t.selected[1].is_selected?"changeClor":"",on:{click:function(e){t.sortType("sales_sum")}}},[t._v("销量")]),t._v(" "),o("p",{class:1==t.selected[2].is_selected?"changeClor":"",on:{click:function(e){t.sortType("price")}}},[t._v("价格\n\t\t\t\t\t"),o("img",{directives:[{name:"show",rawName:"v-show",value:0==t.priceSort,expression:"priceSort == 0"}],attrs:{src:s("v77k")}}),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:1==t.priceSort,expression:"priceSort == 1"}],attrs:{src:s("v77k")}})]),t._v(" "),o("p",{class:1==t.selected[3].is_selected?"changeClor":"",on:{click:function(e){t.sortType("goods_id")}}},[t._v("新品")])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollTop>=170,expression:"scrollTop >= 170"}],staticStyle:{width:"100%",height:"0.8rem"}}),t._v(" "),o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"goodsContent",attrs:{"infinite-scroll-distance":"600","infinite-scroll-disabled":"loading"}},[t._l(t.list,function(e,s){return o("div",{key:"a_index",staticClass:"listcard",on:{click:function(s){t.toGoodsDetail(e)}}},[o("div",{staticClass:"display_img"},[o("div",{staticClass:"img_box"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnail_main_250,expression:"item.thumbnail_main_250"}]})]),t._v(" "),o("div",{staticClass:"express"},[o("div",[1==e.is_special_sale?o("span",{staticClass:"special"},[t._v("特卖")]):t._e(),t._v(t._s(e.goods_name))]),t._v(" "),o("div",{staticClass:"bottom_ul_goods"},[o("ul",{staticClass:"siteName"},[o("li",{staticStyle:{"font-size":"0.28rem",color:"#CC3737","margin-top":"0.5rem"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t¥ "+t._s(e.price)+"   "),o("span",{staticStyle:{color:"#8E8E8E","text-decoration":"line-through"}},[t._v("¥ "+t._s(e.market_price))])]),t._v(" "),o("li",[o("div",{class:[e.is_collect?"iconfont redClass icon-yishoucang":"iconfont icon-shoucang c2Class"],on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.collection(e)}}}),t._v(" "),o("div",{staticStyle:{color:"#585858"},domProps:{innerHTML:t._s(e.is_collect?"已收藏":"收藏")}})])])])])])])}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.loadBottom,expression:"loadBottom"}],staticClass:"load-bottom"},[o("mt-spinner",{staticClass:"spinner",attrs:{type:"fading-circle"}}),t._v(" "),o("span",[t._v("加载中...")])],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.notMore,expression:"notMore"}],staticClass:"not-more"},[t._v("我是有底线的")])],2)])]),t._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"top",attrs:{src:s("L+nP")},on:{click:t.toTop}})])},staticRenderFns:[]};var c=s("VU/8")(i,r,!1,function(t){s("M+uI")},"data-v-10283e44",null);e.default=c.exports},"M+uI":function(t,e){},v77k:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAYAAADpwXTaAAAAAXNSR0IArs4c6QAAAfhJREFUOBHllD1IQlEUx++9WuYHKARFQVtrtEREU0sZZVGDb7EQIbCpIaIaW4taggojSIkWHYIUIwhqqIZwKtqaXKJJhSQi9PY/j568Zy+xj60D9517vn7vXO4HYzVESsnz+fxqLpd7LhQKGzVSa4cAEgDtAiS1AXuHfvBVpWkABRYURlE0VV3IOd9zu91h6PKnWLUDoAYs6RDaXx3T2QcejycEYEnnY4bOALChozgSxvVJZnOAEugwAP2mxSswgOzo6AjaqwXr0El06AfwlXJVGAAugJLQA3UADCkAnaHDCegiB8CNpaWR0W/I+p5xhQ5H6Ryd/6Qjk39dWuE8wcgKIcqA0u7QlqsDNukSxcj3Yas+vU1xyC18/0F4MrYwzyTv/oPF3ltxb/1Myr7fwnDOzoXdIYZxcq9/A6P6JoeYFIPKaqHR0jpEJ/knQM7Zhcvp8hKncjfT6U1b6SmbkIyN1QtF8Wmzs32yX5l/oZoKjIxMJtLwePdwKFnN54dSGVZybGnpUEZG5tRLrvrUiO4j43FL6uVmH2d/Wuc2TDnjibauzkBPT7jy/FCCoTOtQsoVkYoVI7g+M5pP01ywA5+9N8QVxfAwUtwURgGAeCq2uA09SzYJlrbnCzrxZK/Q/fwkX8IoUwVGl9YZL4eB2vIF15YBxB6Zyzts5eD+AEuo1AAAAABJRU5ErkJggg=="}});