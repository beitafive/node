webpackJsonp([21],{ACF4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAACtCAMAAAD1cQ9xAAABYlBMVEUAAAAAAAD////////////////////////////5+fn8/Pz///////////////9fX19NTU0yMjL////s7Oz+/v7+/v7g4OAfHx////////////////+vr6////+dnZ3////////////////39/f////z8/Py8vLa2tqmpqZ3d3f////////6+vr6+vr////+/v7////09PTq6urp6eni4uLe3t7////////Pz8////+RkZENDQ3////////l5eX////////////////09PT////x8fH////////////////////////Hx8e3t7f////////T09PNzc3////////v7+/t7e3////V1dW9vb3///+VlZX////////////////////m5ubj4+PLy8v////////8/Pz29vb29vb////CwsL////BwcH///+IiIj////S0tL////19fW4uLj////t7e3///9LztpoAAAAdXRSTlMaAP36Agb47eHM4O/by1ImIh/0lurleBwQ9ql+Qjw5IZRxFMO7r6tsPSwoG9fTl+e3tZGMe3NpZF9XNBoL0YN31caysrCno56bj2BcVUY5F2JbN/GhnYNmTUk1MC4kHoeFf1g1BNvAvGtQTk5FMYphwLhIR5fXT/G1AAAJlElEQVR42tWdZ1saQRCA5847iihdQUUQbCD2rliTWKLGlhhjjVHTe7n/n8wscCJIPWDyfrI8h+9zzu7MDnsLSEaj+OMDN53noYgqGY5htgtncx3tzU1et5amwWZZ6en68OVSkSrAaNvLreGeFi0PbYvtHZ1l3GrDbffmNpu0omjrWd69lYrGcFvlpGtFK4nno+G4VJgq2J499d6Xaenue+GZeDN1fLDzvb/1avxobWywTctE7tlakPJivG08vHhXwTTUO9H/zAk5SJxeTx51Z4S1e/1LnnFntK3yaVS+M/Kt4zsuKERwqndE0xl5vSdlUwVbZe7ObR3yHDigWKKtY2Z90HVdSplUwfZ2S58CGieCUCKu/TFT+p+ycSHpVMFWnbZoSWwvPkNZxFqt6RHXfi4JqmFrT7u+O3ZB+UTHvSnfdYrfKthejGoCeewXVIjzTWqWsE0rVbBVO0xJ194AGICrtVETNN8YbnvSpBENa0EwCF//W42Qh/2G2vrbU/EaBANJtNo0wms30PbQksys+2AwsT5N8FQ1yjbcIILA4wTj+TiYjN6QIbb+JxrRHYCq4Ftyi8nBboDtrogC0yRUjVOrRnSpldrOiChofAZVxPUnGQ2Rymw7NOKxA6rLrCh3mkIV2CpdIgpaoerMi2gYOS/bVm3Xo6Dq+DxirHWWabvQI0rYGNSGVpnqXntZtpFmMXE5oFbsmygPz5RhuyBkH7ugduw8J93tkm1VEQYvElBLAl5Kmr9LtFXEAJuAGhOkMtJ9WJptVx1kiXlKneaBUmw7RBhAHYhSnrDEi7edEQMsAfXgFRU5K/5ibXcbaOpyQX04oD//qEhbv4WSggPqRT+liXBxtk8o3cagfizRPHZYjG2YCplnUE8e00jzF7Y9pKhphbrioGn3SUFbEbSPoc48M1HoFrJtp6B1QL2ZpNA9y297wiBoBWNosqrks1WpIzMJDBChO5PPtoPSArBghwqGyMO2FyYMlgDwoBd1Nx+2pZanB5jwFWtzefchWzv1upzABZoXFpXctipNtfvABt8QCk3ntp2mlicw4pWM/2w1l+2tBYdYEDixRrNYLtst/M0asOIUi5YmJdtWwcQg87q1ANSM3s62ncOf9wIzohi5K8p9W2URby2XxHCv0rXft/2EPx0DdgSor3vfltLYL+DHexTbzbSNy9zm2hSv0HY403YZf3YMHBnEUkzNsMUxZnMBR5ZonN21PSu7kaRlUeC3JfNVFgtK3fYpvtBnnrbQjRVBRLdVvLh0BKa2/XjdB932hNqfXG2d7vSUC+lubZCrLRULciRtu4JdOmBrO4sXzqVs92g5xtfWIacSBKTKrwO+tmDFKjdlu4lThIOx7TheGU/aYh1uBca211STC9tL/Hqcs60TFzwbZCsWZDucbSlwLcJ2GNuKLta2E3jpHtn20GzL2pZm3E6ybcHlI2/bKPUV0HaBigTeti4cZt/Qlmrbft628Fa83wcikz1jbvtTZDMQ/XAnc1sPpltVAnoXpwWY207htQP/bHFHSjd324947YkEVCX0cbcNikoBJC8ud7nbxkSXHKQ2LMW52zrx2mUJFEoO3G0Blw8vJfDja7xhb2vD/c8SxPE1ptjbttA7fTBA/Tr2tti7a5fgkJaQ7G2xHh+VoJNWDv+FbY8E5/ga39nbDlGjEUJUMLK3xd0K6xJEaNMPe1vMuF0SqPgaV+xtMeO+lkBqwG4Cd1sfXtvxzxazxBF3W4fYcAWSBd+M5m47j9duSUDN2zHutgHRwgXR/OBuuy/aH0Bt/LYEc9srvDbyz/YDfnHK3BY3gZhxhf4FX+SauS2WCatoS+3bSea2Zmzgoq2CaeKIt22MlmVoS+9Id/O2/YyX2smWmjW8bUWrhmypERZkbduH7XuVbDtpHcnaFteQPySyVXGY9XK2DVIFJmwp945wtm0VeVfYLuM3Uca2uG/YrSZtd2mxw9c24aXledL29jkWjXxtA5QbyDa1dc3sYmtLu5Zu0rZh/HafrS3tCFPStnEZQ4GrbUDfm0+2NIeZYkxtPWL+0m23aFbgaesbEfubddsFN26o4Gl7oFFbPGlLrFOCYGlLj5RcZNh+Efs/GOJw0yInw1bB4PDyeYzk3mQ7rdsSr8WbJexwYtZ1++/Z7mHZ2MJvB+4kHWaT9QRBF4OHN7NxWTATxLNsL7Ez2ugDXkzpu8Z1W2RDtPRZ4cMGvhzKYXuBxcLbBHCCNgqv53xiq51d5Drp1g7ktD3Hm2uLAR9ot2W7lGWrp98+YEPUhBPCwAO2ezbU/Qhc6Bb1TA5b/VnDQS6z2DHaWBYetFWaGeVfxwjKfMrzrPSNjFn5FDhwJM7TyGNLu1s1K4dyYRZN2kJ5bf1eJo9Lz5tF7+tBW8KuIbNQZ1xW1GhWC9iKB4zM81BfaJ1rC0mFbNVmCt36TmOzsmjd57UlQra6h64I2i6poC2Fbp3Lm9igCNqCtvoyQt6HOuG06kFbwFYPXdMO1AXfe7pZ9qLPsIo00VHmAagDiT4NCZdwPliIcrQ3CLXHQ7KvSzp77ZwmhsbaT7tXJLtR4il8nW1Ur0WhpiTEnX2klGBL2GVKaq+ghvhEzK4ulH565Azpug+gZjjfk+yiv5yTObcb6GSmfqgRMau4s/7yTj397aaZbwlqwvygiNmFck+UPTRX+fTb7BNwN27LP613wFKjM2VdHlmfZ8uxJeIr1Tu1OfusXjlc4bnN/kcaMVa1aNCjwGav+ExsJZw8Z7pqRY7jqOgTx6H4k9x7v0I1OB7Rz++u3FY/H/35pA+MJtqt6VFgiC2dPU8MGZyIneMmPQoMsSXOVjVCXjs1sCzob9SItg7V2M93UGbMGtHQFwVDcE2hK/IoZPwnfUQ2ZY2QHwcMiIFJiyawYGPOWFtid1FL8r7C+HUseTWB6SXWBUbbEsp0S8p3cOlr2eF63etOf0SN6Hwbb0uoM00pX7m73wmlE/CMpF9hXXc13pZQtle0FO6+2ZISciKwNKilMA1nDq4q2JKvvVlLI1vHr4u7xcHWXq+Wxv00LmVhvC2xO2zWdBqsE7NRFzxM7PNUX4t2h9XpPAsEY20J1f6E8puu/PanZ+pjMOaEND7HfOD71ZrVrGXQ9PJCKhOQyibyoVnWspFtLYNW61Cjt03LgXmzU5EKUA1bEp4bbtKKxj26fFOBKtlWSnx7w1LY1PTDiM9gBMkI9jpnvj1qasjpaV7dWLYPVG4qbI1DHTjZnl5++XSzfbTnyfrwt47w1lxnRDIQkP4n/gKg+9LOK07atwAAAABJRU5ErkJggg=="},Pm5X:function(t,e){},"X+DF":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"funong",data:function(){return{selected:"1",showBefore:!0,detail:"",firstComment:"",edg:"",commentNum:"",commentList:"",isShowcomment:!1,noSend:!0,isSend:!1,id:"",showZantingBtn:!1,showPlayerBtn:!1,playTime:"",commentValue:"",backgroundList:"",itemList:"",goodsId:"",specKey:[],isDisabled:!1,rewardImg:"",popupVisible:!1,buyNumber:1,errorPopup:!1}},components:{margepro:s("UgkP").a},beforeMount:function(){this.id=this.$route.query.id},mounted:function(){this.getInfo(),this.shareItem(),this.getDialogImg()},methods:{getInfo:function(){var t=this,e="&search[find_primary_id]="+t.id+"&order[comment_id]=desc";t.$axios({url:t.$store.state.api.commentList+e,method:"get",params:{page:1,page_count:500}}).then(function(e){var s=e.data;console.log(s,"r"),0==s.error&&(t.commentList=s.data.rows,t.commentNum=s.data.pagination.item_total,0!=t.commentList.length&&(t.firstComment=s.data.rows[0]))}),t.$axios({url:t.$store.state.api.findDetail,method:"get",params:{id:t.id}}).then(function(e){var s=e.data;console.log(s,"r2"),0==s.error&&(t.detail=s.data,t.backgroundList=s.data.background_image_arr,t.itemList=s.data.project_image_arr,t.goodsId=s.data.goods_id,t.specKey=s.data.spec_key.split(","),console.log(t.specKey),t.rewardImg=s.data.reward_image_link,null==s.data.video_link?t.showPlayerBtn=!1:t.showPlayerBtn=!0,"-1"==t.detail.end_days&&(t.isDisabled=!0))})},ended:function(){this.showBefore=!0,this.showPlayerBtn=!0},showZanting:function(){this.showZantingBtn=!this.showZantingBtn,1==this.showPlayerBtn&&(this.showZantingBtn=!1)},player:function(){this.showBefore=!1,this.showPlayerBtn=!1;var t=document.getElementById("video");t.currentTime=this.playTime,t.play()},pauser:function(){var t=document.getElementById("video");t.pause(),this.playTime=t.currentTime,this.showZantingBtn=!1,this.showPlayerBtn=!0},showComment:function(){this.isShowcomment=!this.isShowcomment,0==this.isShowcomment&&(document.getElementById("funong").style.height="",this.noSend=!0,this.isSend=!1),1==this.isShowcomment&&(document.getElementById("funong").style.height="100%"),null!=this.detail.video_link&&this.pauser(),this.pauser()},thisFocus:function(){this.isShowcomment=!0,this.isSend=!0,this.noSend=!1,0==this.isShowcomment&&(document.getElementById("funong").style.height=""),1==this.isShowcomment&&(document.getElementById("funong").style.height="100%"),null!=this.detail.video_link&&this.pauser()},sendComment:function(){var t=this;""==t.commentValue?t.$toast("您还没有输入内容哦"):t.$axios.post(t.$store.state.api.sendComment,{find_primary_id:t.id,content:t.commentValue}).then(function(e){0==e.data.error&&(t.commentValue="",""==t.commentValue&&(t.commentValue=void 0),t.getInfo())})},toBuy:function(){var t=this;t.$axios({method:"get",url:t.$store.state.api.goodsDetail.set,params:{goods_id:t.goodsId,goods_num:t.buyNumber,goods_spec:t.specKey.join(",")}}).then(function(e){console.log(e,"res"),0==e.data.error&&(sessionStorage.setItem("funongGoodsId",t.goodsId),t.$router.push({path:"/orderconfirmation",query:{spe:1,goods_id:t.goodsId,goods_num:t.buyNumber,spec_key:t.specKey}})),1==e.data.error&&(t.errorPopup=!0)}).catch(function(t){})},shareItem:function(){var t=this;wx.ready(function(){wx.onMenuShareTimeline({title:t.detail.title,link:"https://wd-user.hzanchu.com/funong?id="+t.id+"?store_id="+t.$store.state.storeinfo.id,imgUrl:"http://wd-resource.cdn3.hzanchu.com/resource/image/optimized/2017/11/10/9e3126159d5daaecb58807d9ba31399d.jpg"}),wx.onMenuShareAppMessage({title:t.detail.title,desc:t.detail.content,link:"https://wd-user.hzanchu.com/funong?id="+t.id+"?store_id="+t.$store.state.storeinfo.id,imgUrl:"http://wd-resource.cdn3.hzanchu.com/resource/image/optimized/2017/11/10/9e3126159d5daaecb58807d9ba31399d.jpg",type:"link"})})},getDialogImg:function(){this.$axios({method:"get",url:this.$store.state.api.dialogImg,params:{store_id:this.$store.state.storeinfo.id,fnzn_id:this.id,url:"https://wd-user.hzanchu.com/funong?id="+this.id+"&store_id="+this.$store.state.storeinfo.id,nickname:this.$store.state.storeinfo.nickname}}).then(function(t){sessionStorage.setItem("defal",t.data.data.url)}).catch(function(t){})},showPopup:function(){this.popupVisible=!0},subNum:function(){if(this.buyNumber<=1)return document.getElementById("can_not").className="cannot",this.buyNumber=1,void this.$toast("不能再少啦");this.buyNumber=this.buyNumber-1},addNum:function(){this.buyNumber=parseInt(this.buyNumber)+1},closeErrorPopup:function(){this.errorPopup=!1,this.popupVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"funong",attrs:{id:"funong"}},[n("div",{staticClass:"message"},[n("div",{staticClass:"player"},[n("div",{staticClass:"before-img"},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.showPlayerBtn,expression:"showPlayerBtn"}],staticClass:"play-btn",attrs:{src:s("RBJf")},on:{click:t.player}}),t._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:t.showBefore,expression:"showBefore"}],staticClass:"video-poster",attrs:{src:t.detail.image_link}})]),t._v(" "),n("div",{staticClass:"video"},[n("video",{staticStyle:{width:"100%",height:"3.7rem"},attrs:{id:"video",src:t.detail.video_link,preload:"auto","x5-playsinline":"",playsinline:"","webkit-playsinline":"",type:"video/mp4"},on:{click:t.showZanting,ended:t.ended}}),t._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:t.showZantingBtn,expression:"showZantingBtn"}],staticClass:"zanting-btn",attrs:{src:s("ACF4")},on:{click:t.pauser}})])]),t._v(" "),n("p",{staticClass:"buy-people"},[n("i",{staticClass:"iconfont"},[t._v("")]),n("span",[t._v("支持人数"+t._s(t.detail.buy_people))])]),t._v(" "),n("p",{staticClass:"video-title"},[t._v(t._s(t.detail.title))]),t._v(" "),n("p",{staticClass:"video-msg"},[t._v(t._s(t.detail.content))]),t._v(" "),n("margepro",{staticClass:"support",attrs:{value:t.detail.percent,maxWidth:+t.detail.percent>100?"100":+t.detail.percent,place:+t.detail.percent>100?"95":+t.detail.percent}}),t._v(" "),n("div",{staticClass:"activity"},[n("span",[t._v("众筹份数"+t._s(t.detail.show_group_num)+"份")]),t._v(" "),"-1"!=t.detail.end_days?n("span",[t._v("剩余天数"+t._s(t.detail.end_days)+"天")]):t._e(),t._v(" "),"-1"==t.detail.end_days?n("span",[t._v("已结束")]):t._e()])],1),t._v(" "),n("div",{staticClass:"funong-info"},[n("mt-navbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("mt-tab-item",{attrs:{id:"1"}},[n("span",[t._v("农人背景")])]),t._v(" "),n("mt-tab-item",{attrs:{id:"2"}},[n("span",[t._v("项目信息")])])],1),t._v(" "),n("mt-tab-container",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("mt-tab-container-item",{attrs:{id:"1"}},[t._l(t.backgroundList,function(e){return 0!=t.backgroundList.length?n("img",{attrs:{src:e.url,width:"100%"}}):t._e()}),t._v(" "),0==t.backgroundList.length?n("p",{staticClass:"no-content"},[t._v("暂时没有内容哦")]):t._e()],2),t._v(" "),n("mt-tab-container-item",{attrs:{id:"2"}},[t._l(t.itemList,function(e){return 0!=t.itemList.length?n("img",{attrs:{src:e.url,width:"100%"}}):t._e()}),t._v(" "),0==t.itemList.length?n("p",{staticClass:"no-content"},[t._v("这里暂时也没有")]):t._e()],2)],1),t._v(" "),n("div",{staticStyle:{height:"3rem",width:"100%"}})],1),t._v(" "),n("div",{staticClass:"comment"},[0==t.isShowcomment?n("div",{staticClass:"hot-comment"},[""!=t.firstComment?n("img",{attrs:{src:t.firstComment.head_pic}}):t._e(),t._v(" "),""!=t.firstComment?n("span",{on:{click:t.showComment}},[t._v(t._s(t.firstComment.content))]):t._e(),t._v(" "),""==t.firstComment?n("span",{on:{click:t.showComment}},[t._v("现在还没有评论哦，快来抢沙发！")]):t._e(),t._v(" "),n("i",{staticClass:"iconfont",on:{click:t.showComment}},[t._v("")])]):t._e(),t._v(" "),1==t.isShowcomment?n("div",{staticClass:"all-comment"},[n("div",{staticClass:"comment-num",on:{click:t.showComment}},[t._v("评论("+t._s(t.commentNum)+")"),n("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),n("div",{staticClass:"scroll-dialog"},t._l(t.commentList,function(e){return n("div",{staticClass:"user-comment"},[n("div",[n("img",{attrs:{src:e.head_pic}}),t._v(" "),n("span",[t._v(t._s(e.user_name))]),t._v(" "),n("span",[t._v(t._s(e.created_at))])]),t._v(" "),n("p",[t._v(t._s(e.content))])])}))]):t._e(),t._v(" "),n("div",{staticClass:"send-comment"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.commentValue,expression:"commentValue"}],attrs:{type:"text",placeholder:"我有一句感慨想讲..."},domProps:{value:t.commentValue},on:{focus:t.thisFocus,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.sendComment(e):null},input:function(e){e.target.composing||(t.commentValue=e.target.value)}}}),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:1==t.noSend,expression:"noSend == true"}],class:["-1"==t.detail.end_days?"ended":"to-buy"],attrs:{disabled:t.isDisabled},on:{click:t.showPopup}},[t._v("前往支持")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:1==t.isSend,expression:"isSend == true"}],on:{click:t.sendComment}},[t._v("发送")])])]),t._v(" "),n("mt-popup",{staticClass:"buynum-dialog",attrs:{position:"bottom"},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[n("div",{staticClass:"buy-popup",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[n("p",{staticClass:"popup-title"},[t._v("想支持的份数")]),t._v(" "),n("div",{staticClass:"choice-num"},[n("p",[t._v("份数")]),t._v(" "),n("div",[n("span",{class:[t.buyNumber>1?"can":"cannot"],attrs:{id:"can_not"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.subNum(e)}}},[t._v("-")]),t._v(" "),n("span",[t._v(t._s(t.buyNumber))]),t._v(" "),n("span",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addNum(e)}}},[t._v("+")])])]),t._v(" "),n("div",{staticClass:"buy-button",on:{click:t.toBuy}},[t._v("确认购买")])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.errorPopup,expression:"errorPopup"}],staticClass:"no-goods",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[n("p",[t._v("启禀陛下，这些商品全部卖光了，您还是挑点别的吧")]),t._v(" "),n("div",[n("span",{on:{click:t.closeErrorPopup}},[t._v("取消")]),t._v(" "),n("span",{on:{click:t.closeErrorPopup}},[t._v("确定")])])])],1)},staticRenderFns:[]};var o=s("VU/8")(n,i,!1,function(t){s("Pm5X")},"data-v-96b16436",null);e.default=o.exports}});