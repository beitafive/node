webpackJsonp([110],{I4rs:function(a,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=e("NHPe"),o={name:"paywx",data:function(){return{orderSn:"",orderId:"",orderInfo:{goods_name:"",order_amount:""},is_special:"",wxPayParams:{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""},space:"",payType:""}},created:function(){this.orderSn=this.$route.query.order_sn,this.space=this.$route.query.spe,this.payType=this.$route.query.pay_type},beforeMount:function(){this.getOrderInfo()},mounted:function(){10==this.returnStatus()&&this.getWxPayParams()},methods:{returnStatus:function(){var a=Object(t.c)(),r=this.$route.query.type;return a?"zhi"==r?11:10:"zhi"==r?21:20},goPay:function(){var a=this.returnStatus();console.log(a),10==a?this.payWx():11==a?this.$router.push({path:"/payzfb",query:{orderId:this.orderId,orderSn:this.orderSn}}):20==a?this.$router.push({path:"/payQRcode",query:{orderSn:this.orderSn}}):this.payZfb()},getWxPayParams:function(){var a=this;a.$axios({method:"get",url:a.$store.state.api.wx.get_wxpay_params,params:{order_sn:a.orderSn}}).then(function(r){var e=r.data;a.wxPayParams.timeStamp=e.data.timeStamp,a.wxPayParams.nonceStr=e.data.nonceStr,a.wxPayParams.package=e.data.package,a.wxPayParams.signType=e.data.signType,a.wxPayParams.paySign=e.data.paySign})},getOrderInfo:function(){var a=this;a.$axios.get(a.$store.state.api.order.get_order_info,{params:{order_sn:a.orderSn}}).then(function(r){var e=r.data;0==e.error&&(a.orderInfo.goods_name=e.data.goods_list[0].goods_name,a.orderInfo.order_amount="￥"+e.data.order_amount,a.orderId=e.data.order_id,a.is_special=e.data.is_special)})},payWx:function(){var a=this;wx.chooseWXPay({timestamp:a.wxPayParams.timeStamp,nonceStr:a.wxPayParams.nonceStr,package:a.wxPayParams.package,signType:a.wxPayParams.signType,paySign:a.wxPayParams.paySign,success:function(r){console.log(a.orderInfo),1==a.is_special&&void 0==a.payType?a.$router.push({path:"/successpecialpay",query:{order_sn:a.orderSn,status:1}}):"gift"==a.payType?a.$router.push({path:"/giftpayok",query:{order_id:a.orderId}}):a.$router.push({path:"/paystatus",query:{order_sn:a.orderSn,status:1,spe:a.space}})}})},payZfb:function(){window.location.href=window.location.origin+"/api.php?s=user/alipay/ali_pay&order_id="+this.orderId}}},s={render:function(){var a=this,r=a.$createElement,e=a._self._c||r;return e("div",{staticClass:"paywx"},[e("div",{staticClass:"goodsTitle"},[e("label",[a._v("购买商品：")]),a._v(" "),e("p",[a._v(a._s(a.orderInfo.goods_name))])]),a._v(" "),e("mt-cell",{staticClass:"price",attrs:{title:"支付金额："},model:{value:a.orderInfo.order_amount,callback:function(r){a.$set(a.orderInfo,"order_amount",r)},expression:"orderInfo.order_amount"}}),a._v(" "),e("a",{staticClass:"paywx-btn",on:{click:a.goPay}},[a._v("立即支付")])],1)},staticRenderFns:[]};var n=e("VU/8")(o,s,!1,function(a){e("XS80")},"data-v-1130daf5",null);r.default=n.exports},XS80:function(a,r){}});