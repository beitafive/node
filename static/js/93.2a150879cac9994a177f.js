webpackJsonp([93],{"f96/":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("bOdI"),r=i.n(e),a={name:"special_goods",data:function(){var t;return t={selected:"1",Stime:"00:00:00",goodsName:"",goodsPrice:"",Yprice:"",postCost:"",storeCount:"",sacilConut:"",onlyCount:"2",toster:!1,tip:"",goodsDetailM:[],storeMassege:[],imgPicture:[],scalDisplay:[],popupVisible:!1,shopPrice:"",shopYPrice:"",YCount:"66",McountA:1,scalable:[],siteId:"",scalaPrice:[],Stringa:"",b:"",c:"",arr1:[],arr2:[],arr:[],arr3:[],ordermsg:{goods_id:"1",goods_num:"12123",goods_key:"31",siteId:""},ids:"",endTime:"",finsh:!1,price:""},r()(t,"goodsName",""),r()(t,"ids",""),r()(t,"storeId",""),r()(t,"counId","10"),t},beforeMount:function(){document.title=this.$route.meta.title},created:function(){this.ids=this.$route.query.goods_id,this.storeId=this.$route.query.store_id,void 0==this.$route.query.goods_id&&(this.ids="240"),this.goodsDetail(),this.getStoreInfo(),this.isStore()},methods:{toAnchu:function(){window.location.href="https://wd-user.hzanchu.com/api.php?s=user/api/set_store&_store_id="+this.storeMassege.store_id},scalShow:function(){this.popupVisible=!0},scalShow2:function(){this.popupVisible=!0},getStoreInfo:function(){var t=this;t.$axios({method:"get",url:t.$store.state.api.keeperSelect.keeperMassege}).then(function(s){var i=s.data;0==i.error&&(t.storeMassege=i.data)})},isStore:function(){var t=this;t.$axios({method:"get",url:t.$store.state.api.goodsDetail.is_store,params:{}}).then(function(s){1==s.data.data.has_store&&t.$router.push("/tostore")}).catch(function(t){})},goodsDetail:function(){var t=this;t.$axios({method:"get",url:t.$store.state.api.goodsDetail.goodsMassege,params:{goods_id:t.ids,store_id:t.storeId}}).then(function(s){if(0==s.data.error){var i=document.getElementById("contentImg"),e=s.data.data.goods_content.replace(/<p>/g,"<p style='line-height:0'>").replace(/<img/g,"<img style='width:100%;'");i.innerHTML=e,t.goodsDetail=s.data.data,t.postCost=t.goodsDetail.is_free_shipping,t.Yprice=t.goodsDetail.shop_price,t.storeCount=t.goodsDetail.store_count,t.sacilConut=t.goodsDetail.sales_sum,t.siteId=t.goodsDetail.site_id,t.goodsName=t.goodsDetail.goods_name,t.goodsPrice=t.goodsDetail.price,t.Yprice=t.goodsDetail.market_price,t.shopPrice=t.goodsDetail.price,t.shopYPrice=t.goodsDetail.market_price,t.imgPicture=s.data.data.images,t.scalDisplay=s.data.data.attrs,t.scalable=s.data.data.spe_arr,t.scalaPrice=s.data.data.spec_goods,t.endTime=s.data.data.prom_end_time,t.price=s.data.data.price,t.goodsName=s.data.data.goods_name,t.counId=s.data.data.coun_id,t.Stime=s.data.data.prom_end_time.substring(11)}}).catch(function(t){});(new Date).getTime()},getItemsId:function(t,s,i){this.arr3=[];for(var e=0,r=this.scalable[i].items.length;e<r;e++)this.scalable[i].items[e].select=0;if(t.select=1,this.scalable[i].items.length>1)for(var a in this.b=new Object,this.b.index=i,this.b.id=t.item_id,this.arr1.push(this.b),this.arr1)for(var o in this.arr1)a<o&&this.arr1[a].index==this.arr1[o].index&&this.arr1.splice(a,1);for(var n in 1==this.scalable[i].items.length&&(this.c=new Object,this.c.index=i,this.c.id=t.item_id,this.arr2.push(this.c)),this.arr=this.arr1.concat(this.arr2),this.arr)this.arr3.push(this.arr[n].id);for(var c=0;c<this.arr3.length-1;c++)for(var d=c+1;d<this.arr3.length;d++){if((p=this.arr3[c])>this.arr3[d]){var l=this.arr3[d];this.arr3[d]=p,this.arr3[c]=l}}var h=[];for(c=0,d=this.arr3.length;c<d;c++)-1===h.indexOf(this.arr3[c])&&h.push(this.arr3[c]);for(var g in this.arr3=h,this.arr3.length==this.scalable.length&&this.sortReSt(),this.arr)this.arr3.push(this.arr[g].id);for(c=0;c<this.arr3.length-1;c++)for(d=c+1;d<this.arr3.length;d++){var p;if((p=this.arr3[c])>this.arr3[d]){l=this.arr3[d];this.arr3[d]=p,this.arr3[c]=l}}for(h=[],c=0,d=this.arr3.length;c<d;c++)-1===h.indexOf(this.arr3[c])&&h.push(this.arr3[c]);this.arr3=h,this.arr3.length==this.scalable.length&&this.sortReSt()},miusCount:function(){this.McountA<=1?this.McountA=1:this.McountA=this.McountA-1},addCount:function(){this.McountA=parseInt(this.McountA)+1},sortReSt:function(){if(0==this.Stringa.length&&(this.Stringa=this.arr3[0]),this.Stringa=this.arr3[0])for(var t=1;t<this.arr3.length;t++)this.Stringa=this.Stringa+"_"+this.arr3[t];if(this.arr3.length==this.scalable.length)for(var t in this.scalaPrice)if(this.Stringa==t)return this.shopPrice=this.scalaPrice[t].price,this.price=this.scalaPrice[t].price,this.storeCount=this.scalaPrice[t].store_count,void(this.shopYPrice=this.scalaPrice[t].market_price)},goShopping:function(){var t=this;t.ordermsg.goods_num=1,t.ordermsg.goods_id=t.goodsDetail.goods_id,t.ordermsg.goods_key=t.Stringa,t.ordermsg.siteId=t.goodsDetail.site_id,""!=t.ordermsg.goods_num&&" "!=t.ordermsg.goods_id&&""!=t.ordermsg.goods_key?t.$router.push({path:"/order",query:{num:t.ordermsg.goods_num,id:t.ordermsg.goods_id,key:t.ordermsg.goods_key,siteid:t.ordermsg.siteId,price:t.price}}):(t.finsh=!0,setTimeout(function(){t.finsh=!1},1e3))}}},o={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"goodsDetail"},[i("div",{staticClass:"banner"},[i("mt-swipe",{staticClass:"swipper",attrs:{auto:4e3}},t._l(t.imgPicture,function(t,s){return i("mt-swipe-item",{key:s},[i("a",[i("img",{attrs:{src:t}})])])}))],1),t._v(" "),i("div",{staticClass:"goodsExpresses"},[i("div",{staticStyle:{"margin-top":"0.26rem","margin-left":"0.36rem","font-size":"0.34rem",color:"#3c3c3c"}},[t._v(t._s(t.goodsName))]),t._v(" "),i("div",{staticStyle:{"font-size":"0.36rem",color:"#CC3737",margin:"0.2rem 0.36rem 0.1rem 0.36rem"}},[t._v("¥"+t._s(t.price))]),t._v(" "),i("div",{staticStyle:{"font-size":"0.2rem",color:"#8E8E8E","margin-left":"0.36rem","margin-bottom":"0.26rem"}},[t._v("库存 "+t._s(t.storeCount))])]),t._v(" "),t.scalable.length?i("div",{staticClass:"scal",on:{click:t.scalShow}},[i("span",[t._v("请选择规格")]),i("i",{staticClass:"iconfont icon-youjiantou"})]):t._e(),t._v(" "),i("div",{staticClass:"anchu-line",on:{click:function(s){t.toAnchu()}}},[i("img",{attrs:{src:t.storeMassege.profile_photo}}),t._v(" "),i("div",[i("p",[t._v(t._s(t.storeMassege.title))]),t._v(" "),i("p",[t._v(t._s(t.storeMassege.description))])])]),t._v(" "),i("div",{staticClass:"goodsContent"},[i("mt-navbar",{model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[i("mt-tab-item",{attrs:{id:"1"}},[i("span",{staticStyle:{display:"inline-block",padding:"0 0.2rem  0.25rem 0.2rem"}},[t._v("商品详情")])])],1),t._v(" "),i("mt-tab-container",{model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[i("mt-tab-container-item",{attrs:{id:"1"}},[i("div",{staticClass:"contentImg",attrs:{id:"contentImg"},domProps:{innerHTML:t._s(t.goodsDetail.cImg)}})])],1),t._v(" "),i("div",{staticStyle:{width:"100%",height:"0.98rem","text-align":"center","line-height":"0.98rem",color:"#adadad","font-size":"0.26rem",background:"#f4f4f4"}},[t._v("\n\t\t\t亲，没有更多内容了哦！\n\t\t")])],1),t._v(" "),i("div",{staticClass:"popup",on:{touchmove:function(t){t.preventDefault()}}},[i("mt-popup",{staticStyle:{width:"100%"},attrs:{visible:t.popupVisible,position:"bottom"},on:{"update:visible":function(s){t.popupVisible=s}},model:{value:t.popupVisible,callback:function(s){t.popupVisible=s},expression:"popupVisible"}},[i("div",{staticClass:"popup_top"},[i("div",{staticClass:"title"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.imgPicture[0]}})]),t._v(" "),i("div",{staticClass:"express"},[i("div",[t._v(t._s(t.goodsName))]),t._v(" "),i("div",{staticStyle:{color:"#888888"}},[i("span",{staticStyle:{color:"#CC3737","font-size":"0.28rem","margin-top":"0.9rem"}},[t._v("价格:¥"+t._s(t.price))])]),t._v(" "),i("div",{staticStyle:{"font-size":"0.26rem",color:"#8E8E8E"}},[t._v("请选择规格")])])]),t._v(" "),t._l(t.scalable,function(s,e){return i("div",{key:e,staticClass:"scalable"},[i("div",{staticClass:"titles"},[t._v("选择套餐")]),t._v(" "),i("div",{staticClass:"selects",staticStyle:{overflow:"hidden"}},t._l(s.items,function(s,r){return i("ul",{key:r,class:[1==s.select?"redborder":""],on:{click:function(i){t.getItemsId(s,r,e)}}},[i("li",{staticStyle:{display:"inline-block"}},[t._v(t._s(s.item))])])}))])}),t._v(" "),i("div",{staticClass:"button",on:{click:function(s){t.goShopping()}}},[t._v("\n\t\t\t\t\t立即购买\n\t\t\t\t")])],2)]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.toster,expression:"toster"}],staticStyle:{width:"2rem",height:"0.8rem","text-align":"center",background:"#8E8E8E","line-height":"0.8rem",color:"#fff","font-size":"0.22rem",position:"fixed",top:"50%",right:"40%","z-index":"3000","border-radius":"0.08rem"}},[t._v(t._s(t.tip))])],1),t._v(" "),t.finsh?i("div",{staticClass:"tip"},[t._v("请选择规格")]):t._e(),t._v(" "),0==t.popupVisible?i("div",{staticClass:"buttons",on:{click:function(s){t.scalShow2()}}},[t._v("\n\t\t立即购买\n\t")]):t._e()])},staticRenderFns:[]};var n=i("VU/8")(a,o,!1,function(t){i("g0dl")},"data-v-35dda571",null);s.default=n.exports},g0dl:function(t,s){}});