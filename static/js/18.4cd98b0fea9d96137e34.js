webpackJsonp([18],{jz8J:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("Au9i"),r={name:"orderdetail",data:function(){return{storeName:"",order_sn:"",orderInfo:"",returnState:"退货",orderId:"",package_num:"",privilege:"",orderStatus:"",canReturn:"",couponInfo:"",showCoupon:!1,spanDialog:!1,errorPopup1:!1,errorPopup2:!1,goodsList:"",payTime:"",getAddress:"",showGetInfo:"",name:"",phone:"",getStatus:"",isHandle:"",type:"",orderStatusName:""}},created:function(){this.order_sn=this.$route.query.order_sn,this.$store.state.orderScrollHeight=this.$route.query.SH,this.type=this.$route.query.type,this.orderStatusName=this.$route.query.order_status_name},beforeMount:function(){document.title=this.$route.meta.title},mounted:function(){this.getOrderInfo()},methods:{toGoodsDetail:function(e){sessionStorage.setItem("entry_sign","orderdetail")},toStore:function(){this.$router.push("/keeperselecte/api.php?s=user/api/set_store&_store_id="+_this.$store.state.storeinfo.id)},callMe:function(){ysf.open()},closePopup1:function(){this.spanDialog=!1,this.errorPopup1=!1},closePopup2:function(){this.spanDialog=!1,this.errorPopup2=!1},lastPay:function(){var e=this;e.$axios({method:"get",url:e.$store.state.api.order.buyAgain,params:{order_id:e.orderInfo.order_id,type:"continue"}}).then(function(t){var o=t.data;console.log(o,"r"),0==o.error&&e.$router.push("/shopcart")}).catch(function(e){})},payAgain:function(){var e=this;e.$axios({method:"get",url:e.$store.state.api.order.buyAgain,params:{order_id:e.orderInfo.order_id}}).then(function(t){var o=t.data;console.log(o,"r"),0==o.error&&e.$router.push("/shopcart"),1==o.error&&"PART_SALE_OUT"==o.error_code&&(e.goodsList=o.error_msg,e.spanDialog=!0,e.errorPopup1=!0),1==o.error&&"ALL_SALE_OUT"==o.error_code&&(e.spanDialog=!0,e.errorPopup2=!0)}).catch(function(e){})},getOrderInfo:function(e,t){var o=this;o.$axios({method:"get",url:o.$store.state.api.order.get_order_info,params:{order_sn:o.order_sn,present_type:o.type,order_type:"present"}}).then(function(e){var t=e.data;0==t.error&&(console.log(t,"r"),o.orderInfo=t.data,o.orderId=t.data.order_id,o.package_num=t.data.goods_list.length,o.privilege=(t.data.market_amount-t.data.order_amount).toFixed(2),o.orderStatus=t.data.order_status,o.storeName=t.data.store_title,o.payTime=t.data.pay_date,o.name=t.data.consignee,o.phone=t.data.mobile,o.isHandle=t.data.is_handle,0==t.data.is_handle&&(o.getStatus="未领取",o.getAddress="付款后分享给好友微信，由收礼人填写",o.showGetInfo=!1),1==t.data.is_handle&&(o.getStatus=t.data.get_user_nickname,o.getAddress=t.data.province_name+t.data.city_name+t.data.district_name+t.data.address,o.showGetInfo=!0),"money"==t.data.coupon.prom_type&&(o.couponInfo=t.data.coupon.name+"：￥"+t.data.coupon.prom_money),"discount"==t.data.coupon.prom_type&&(o.couponInfo=t.data.coupon.name+"："+t.data.coupon.prom_discount/10+"折"),""==t.data.coupon?o.showCoupon=!1:o.showCoupon=!0),1==t.error&&o.$toast({message:t.error_msg,position:"center",duration:1e3})})},cancelOrder:function(){var e=this;Object(s.MessageBox)({showCancelButton:!0,confirmButtonText:"真的",cancelButtonText:"算了"}),s.MessageBox.confirm("真的要抛弃我吗?").then(function(t){var o=e;0==o.orderInfo.order_status&&o.$axios({url:o.$store.state.api.order.cancel_order,method:"post",params:{order_sn:o.orderInfo.order_sn}}).then(function(e){var t=e.data;console.log(t,"r"),0==t.error&&(o.$toast({message:"订单取消成功",position:"center",duration:1e3}),o.$router.push("/mygifts")),1==t.error&&o.$toast({message:t.error_msg,position:"center",duration:1e3})}),1==o.orderInfo.order_status&&0==o.orderInfo.is_handle&&o.$axios({url:o.$store.state.api.gifts.gift_cancel_order,method:"post",params:{order_sn:o.orderInfo.order_sn}}).then(function(e){var t=e.data;console.log(t,"r"),0==t.error&&(o.$toast({message:"订单取消成功",position:"center",duration:1e3}),o.$router.push("/mygifts")),1==t.error&&o.$toast({message:t.error_msg,position:"center",duration:1e3})})})},copyText:function(){var e=document.getElementById("copy_text"),t=e.value.length;this.selectText(e,0,t),document.execCommand("Copy","false",null)},selectText:function(e,t,o){if(e.setSelectionRange)e.setSelectionRange(t,o),Object(s.Toast)({message:"复制成功",className:"iconfont icon-chenggong"});else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",o-t),r.select()}e.focus()},toLookcard:function(){this.$router.push({path:"/lookcard",query:{order_id:this.orderId,type:this.type}})},toMyOrder:function(){this.$router.push({path:"/orderdetail",query:{order_sn:this.orderInfo.order_sn}})},toSend:function(){this.$router.push({path:"/giftpayok",query:{order_id:this.orderInfo.order_id}})},toPay:function(){this.$router.push({path:"/pay",query:{order_sn:this.orderInfo.order_sn,pay_type:"gift"}})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-orderdetail"},[s("div",{staticClass:"order-sn"},[s("p",[e._v("订单编号："+e._s(e.orderInfo.order_sn)),"send"==e.type?s("span",[e._v(e._s(e.orderStatusName))]):e._e()])]),e._v(" "),s("div",{staticClass:"get-status"},["send"==e.type?s("p",[e._v("礼包领取人"),s("span",[e._v(e._s(e.getStatus))])]):e._e(),e._v(" "),"get"==e.type?s("p",[e._v("送礼人"),s("span",[e._v(e._s(e.orderInfo.send_user_nicknam))])]):e._e(),e._v(" "),0==e.isHandle?s("p",[e._v("七日内无人领取将自动取消并退还订单金额，0-3日到账")]):e._e()]),e._v(" "),s("div",{staticClass:"card",on:{click:e.toLookcard}},[e._v("贺卡"),s("i",{staticClass:"iconfont"},[e._v("")]),s("span",[e._v("查看")])]),e._v(" "),0==e.orderInfo.is_handle?s("div",{staticClass:"no-handle-address"},[e._v("\n\t\t\t收货地址："+e._s(e.getAddress)+"\n\t\t")]):e._e(),e._v(" "),0!=e.orderInfo.is_handle?s("div",{staticClass:"is-handle-address"},[s("img",{attrs:{src:o("n/hV"),width:"100%"}}),e._v(" "),s("div",{staticStyle:{padding:"0 0.26rem"}},[s("div",{staticClass:"icon"},[e._v("收货地址")]),e._v(" "),s("div",{staticClass:"address-info"},[s("p",[e._v(e._s(e.getAddress))]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.showGetInfo,expression:"showGetInfo"}]},[s("span",[e._v(e._s(e.name))]),e._v(" "),s("span",[e._v(e._s(e.phone))])])])])]):e._e(),e._v(" "),s("div",{staticClass:"orderlist"},[e._l(e.orderInfo.goods_list,function(t,o){return s("div",{key:"index",staticClass:"caseList",on:{click:function(o){e.toGoodsDetail(t)}}},[240!=t.goods_id?s("router-link",{staticStyle:{"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},attrs:{to:{path:"/goodsDetail",query:{id:t.goods_id}}}},[s("img",{attrs:{src:t.goods_thumbnail_250}})]):e._e(),e._v(" "),240==t.goods_id?s("img",{attrs:{src:t.goods_thumbnail_250}}):e._e(),e._v(" "),s("div",{staticClass:"caseInfo"},[s("p",{staticClass:"goods-name"},[e._v(e._s(t.goods_name))]),e._v(" "),"send"==e.type?s("p",{staticClass:"goods-speckey"},[e._v(e._s(t.spec_key_name))]):e._e(),e._v(" "),s("p",{staticClass:"goods-num"},["send"==e.type?s("span",[e._v("￥ "+e._s(t.goods_price))]):e._e(),e._v(" "),"get"==e.type?s("span",{staticStyle:{color:"#DE4839"}},[e._v(e._s(t.spec_key_name))]):e._e(),e._v(" "),s("i",[e._v("x"+e._s(t.goods_num))])])])],1)}),e._v(" "),"send"==e.type?s("div",{staticClass:"total"},[s("p",[e._v("商品总价"),s("span",[e._v("￥"+e._s(e.orderInfo.total_amount))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showCoupon,expression:"showCoupon"}],staticClass:"coupon"},[s("span",[e._v("优惠券")]),e._v(" "),s("span",[e._v(e._s(e.couponInfo))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.orderInfo.use_coin,expression:"orderInfo.use_coin"}],staticClass:"coupon"},[s("span",[e._v("厨币抵扣")]),e._v(" "),s("span",[e._v("- ¥ "+e._s(e.orderInfo.use_coin))])]),e._v(" "),s("p",[e._v("实付金额"),s("span",{staticStyle:{color:"#DE4839","font-size":"0.32rem"}},[e._v("￥"+e._s(e.orderInfo.order_amount))])])]):e._e()],2),e._v(" "),s("div",{staticClass:"payInfo"},[s("p",[e._v("订单编号："),s("input",{attrs:{id:"copy_text",type:"text",readonly:"",disabled:""},domProps:{value:e.orderInfo.order_sn}}),s("span",{on:{click:e.copyText}},[e._v("复制")])]),e._v(" "),1==e.orderInfo.order_status&&"send"==e.type?s("p",[e._v("支付方式："),s("span",[e._v(e._s(e.orderInfo.pay_name))])]):e._e(),e._v(" "),1==e.orderInfo.order_status&&"send"==e.type?s("p",[e._v("支付时间："),s("span",[e._v(e._s(e.payTime))])]):e._e()]),e._v(" "),"send"==e.type?s("div",{staticClass:"contorls"},[s("p",{staticClass:"service",on:{click:e.callMe}},[s("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "),s("span",[e._v("客服")])]),e._v(" "),0==e.orderInfo.order_status?s("button",{on:{click:function(t){e.toPay()}}},[e._v("去支付")]):e._e(),e._v(" "),1==e.orderInfo.order_status&&1==e.orderInfo.is_handle?s("button",{on:{click:function(t){e.toMyOrder()}}},[e._v("订单详情")]):e._e(),e._v(" "),0==e.orderInfo.order_status||1==e.orderInfo.order_status&&0==e.orderInfo.is_handle?s("button",{on:{click:function(t){e.cancelOrder()}}},[e._v("取消订单")]):e._e(),e._v(" "),1==e.orderInfo.order_status&&0==e.orderInfo.is_handle?s("button",{on:{click:function(t){e.toSend()}}},[e._v("立即送出")]):e._e()]):e._e(),e._v(" "),s("div",{staticStyle:{height:"1rem",width:"100%"}})])},staticRenderFns:[]};var a=o("VU/8")(r,n,!1,function(e){o("nU4m")},"data-v-d465fc52",null);t.default=a.exports},"n/hV":function(e,t){e.exports="data:image/png;base64,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"},nU4m:function(e,t){}});