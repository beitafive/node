webpackJsonp([31],{DuvX:function(t,e){},E06c:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"mineCoupon",data:function(){return{couponList:[],userClass:"",goodsId:"",goodsNum:"",goodsSpec:"",discounts:"",valid_type:"",selected:"1",couponCode:"",canUseList:[],isUsedList:[],loselist:[]}},beforeMount:function(){document.title=this.$route.meta.title},mounted:function(){this.getList()},methods:{showAll:function(t){t.is_unfold=1},hideAll:function(t){t.is_unfold=0},getList:function(){var t=this;this.$axios({url:t.$store.state.api.coupon.coupon_list,method:"get",params:{page:1,page_count:1e3,"order[user_coupon_id]":"desc"}}).then(function(e){var s=e.data;if(console.log(s,"r"),0==s.error){t.couponList=s.data.rows;for(var i=0,o=s.data.rows.length;i<o;i++)0==s.data.rows[i].is_expired&&t.canUseList.push(s.data.rows[i]),1==s.data.rows[i].is_used&&t.isUsedList.push(s.data.rows[i]),1==s.data.rows[i].overdue&&t.loselist.push(s.data.rows[i])}0==t.couponList.length&&(t.isNoCoupon=!0,t.isHasCoupon=!1),0!=t.couponList.length&&(t.isNoCoupon=!1,t.isHasCoupon=!0)}).catch(function(t){})},creatCoupon:function(){var t=this;t.$axios({url:t.$store.state.api.coupon.creatCoupon,method:"get",params:{code_type:"coupon",code_sn:t.couponCode}}).then(function(e){var s=e.data;console.log(s,"r"),0==s.error&&(t.getList(),t.$toast(s.data)),1==s.error&&t.$toast(s.error_msg)}).catch(function(t){})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coupon"},[i("mt-navbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("mt-tab-item",{attrs:{id:"1"}},[i("span",[t._v("未使用")])]),t._v(" "),i("mt-tab-item",{attrs:{id:"2"}},[i("span",[t._v("已使用")])]),t._v(" "),i("mt-tab-item",{attrs:{id:"3"}},[i("span",[t._v("已过期")])])],1),t._v(" "),i("mt-tab-container",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("mt-tab-container-item",{attrs:{id:"1"}},[i("div",{staticClass:"search-coupon"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],attrs:{type:"text",placeholder:"请输入优惠券兑换码"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),t._v(" "),i("button",{on:{click:t.creatCoupon}},[t._v("兑换")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.canUseList.length,expression:"canUseList.length == 0"}],staticClass:"no-coupon"},[i("img",{attrs:{src:s("xUTB")}})]),t._v(" "),i("div",{staticClass:"canuse-card-count"},t._l(t.couponList,function(e){return 0==e.is_expired&&1!=e.is_used?i("div",{staticClass:"coupon-card"},[i("div",{staticClass:"card"},[i("div",{staticClass:"coupon-detail"},[i("span"),t._v(" "),i("span"),t._v(" "),i("div",{staticClass:"coupon-title"},[i("p",[t._v(t._s(e.name))]),t._v(" "),"fixed"==e.valid_date_type?i("p",[t._v(t._s(e.valid_date_fixed_start_at)+"-"+t._s(e.valid_date_fixed_end_at))]):t._e(),t._v(" "),"danymic"==e.valid_date_type?i("p",[t._v(t._s(e.danymic_start_at)+"-"+t._s(e.danymic_end_at))]):t._e()]),t._v(" "),i("div",{staticClass:"coupon-price"},["money"==e.prom_type?i("p",[t._v("￥"+t._s(e.prom_money))]):t._e(),t._v(" "),"discount"==e.prom_type?i("p",[t._v(t._s(e.prom_discount/10)+"折")]):t._e(),t._v(" "),"money"==e.use_limit_type?i("p",[t._v("满"+t._s(e.use_limit_money)+"元可用")]):t._e(),t._v(" "),"number"==e.use_limit_type?i("p",[t._v("满"+t._s(e.use_limit_number)+"件可用")]):t._e(),t._v(" "),"none"==e.use_limit_type?i("p",[t._v(" ")]):t._e()])]),t._v(" "),i("div",{staticClass:"coupon-shop"},[i("div",{staticClass:"retract"},[i("p",["all"==e.valid_type?i("span",[t._v("全场通用")]):t._e(),t._v(" "),"goods"==e.valid_type||"except_goods"==e.valid_type?i("span",[t._v("部分商品")]):t._e(),t._v(" "),"category"==e.valid_type?i("span",[t._v("限品类")]):t._e(),t._v(" "),"category"==e.valid_type?i("span",[t._v("："+t._s(e.valid_type_name))]):t._e()]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:0==e.is_unfold,expression:"item.is_unfold == 0"}],staticClass:"iconfont no",on:{click:function(s){t.showAll(e)}}},[t._v("")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:1==e.is_unfold,expression:"item.is_unfold == 1"}],staticClass:"iconfont yes",on:{click:function(s){t.hideAll(e)}}},[t._v("")])]),t._v(" "),1==e.is_unfold?i("p",{staticClass:"direction"},[t._v(t._s(e.content))]):t._e()])])]):t._e()}))]),t._v(" "),i("mt-tab-container-item",{attrs:{id:"2"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.isUsedList.length,expression:"isUsedList.length == 0"}],staticClass:"no-coupon"},[i("img",{attrs:{src:s("xUTB")}})]),t._v(" "),i("div",{staticClass:"used-coupon"},t._l(t.couponList,function(e){return 1==e.is_used?i("div",{staticClass:"coupon-card"},[i("div",{staticClass:"lose-card"},[i("div",{staticClass:"coupon-detail"},[i("span"),t._v(" "),i("span"),t._v(" "),i("div",{staticClass:"coupon-title"},[i("p",[t._v(t._s(e.name))]),t._v(" "),"fixed"==e.valid_date_type?i("p",[t._v(t._s(e.valid_date_fixed_start_at)+"-"+t._s(e.valid_date_fixed_end_at))]):t._e(),t._v(" "),"danymic"==e.valid_date_type?i("p",[t._v(t._s(e.danymic_start_at)+"-"+t._s(e.danymic_end_at))]):t._e()]),t._v(" "),i("div",{staticClass:"coupon-price"},["money"==e.prom_type?i("p",[t._v("￥"+t._s(e.prom_money))]):t._e(),t._v(" "),"discount"==e.prom_type?i("p",[t._v(t._s(e.prom_discount/10)+"折")]):t._e(),t._v(" "),"money"==e.use_limit_type?i("p",[t._v("满"+t._s(e.use_limit_money)+"元可用")]):t._e(),t._v(" "),"number"==e.use_limit_type?i("p",[t._v("满"+t._s(e.use_limit_number)+"件可用")]):t._e(),t._v(" "),"none"==e.use_limit_type?i("p",[t._v(" ")]):t._e()])]),t._v(" "),i("div",{staticClass:"coupon-shop"},[i("div",{staticClass:"retract"},[i("p",["all"==e.valid_type?i("span",[t._v("全场通用")]):t._e(),t._v(" "),"goods"==e.valid_type||"except_goods"==e.valid_type?i("span",[t._v("部分商品")]):t._e(),t._v(" "),"category"==e.valid_type?i("span",[t._v("限品类")]):t._e(),t._v(" "),"category"==e.valid_type?i("span",[t._v("："+t._s(e.valid_type_name))]):t._e()]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:0==e.is_unfold,expression:"item.is_unfold == 0"}],staticClass:"iconfont no",on:{click:function(s){t.showAll(e)}}},[t._v("")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:1==e.is_unfold,expression:"item.is_unfold == 1"}],staticClass:"iconfont yes",on:{click:function(s){t.hideAll(e)}}},[t._v("")])]),t._v(" "),1==e.is_unfold?i("p",{staticClass:"direction"},[t._v(t._s(e.content))]):t._e()])])]):t._e()}))]),t._v(" "),i("mt-tab-container-item",{attrs:{id:"3"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.loselist.length,expression:"loselist.length == 0"}],staticClass:"no-coupon"},[i("img",{attrs:{src:s("xUTB")}})]),t._v(" "),i("div",{staticClass:"lose-card-count"},t._l(t.couponList,function(e){return 0!=e.is_expired&&1!=e.is_used?i("div",{staticClass:"coupon-card"},[i("div",{staticClass:"lose-card"},[i("div",{staticClass:"coupon-detail"},[i("span"),t._v(" "),i("span"),t._v(" "),i("div",{staticClass:"coupon-title"},[i("p",[t._v(t._s(e.name))]),t._v(" "),"fixed"==e.valid_date_type?i("p",[t._v(t._s(e.valid_date_fixed_start_at)+"-"+t._s(e.valid_date_fixed_end_at))]):t._e(),t._v(" "),"danymic"==e.valid_date_type?i("p",[t._v(t._s(e.danymic_start_at)+"-"+t._s(e.danymic_end_at))]):t._e()]),t._v(" "),i("div",{staticClass:"coupon-price"},["money"==e.prom_type?i("p",[t._v("￥"+t._s(e.prom_money))]):t._e(),t._v(" "),"discount"==e.prom_type?i("p",[t._v(t._s(e.prom_discount/10)+"折")]):t._e(),t._v(" "),"money"==e.use_limit_type?i("p",[t._v("满"+t._s(e.use_limit_money)+"元可用")]):t._e(),t._v(" "),"number"==e.use_limit_type?i("p",[t._v("满"+t._s(e.use_limit_number)+"件可用")]):t._e(),t._v(" "),"none"==e.use_limit_type?i("p",[t._v(" ")]):t._e()])]),t._v(" "),i("div",{staticClass:"coupon-shop"},[i("div",{staticClass:"retract"},[i("p",["all"==e.valid_type?i("span",[t._v("全场通用")]):t._e(),t._v(" "),"goods"==e.valid_type||"except_goods"==e.valid_type?i("span",[t._v("部分商品")]):t._e(),t._v(" "),"category"==e.valid_type?i("span",[t._v("限品类")]):t._e(),t._v(" "),"category"==e.valid_type?i("span",[t._v("："+t._s(e.valid_type_name))]):t._e()]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:0==e.is_unfold,expression:"item.is_unfold == 0"}],staticClass:"iconfont no",on:{click:function(s){t.showAll(e)}}},[t._v("")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:1==e.is_unfold,expression:"item.is_unfold == 1"}],staticClass:"iconfont yes",on:{click:function(s){t.hideAll(e)}}},[t._v("")])]),t._v(" "),1==e.is_unfold?i("p",{staticClass:"direction"},[t._v(t._s(e.content))]):t._e()])])]):t._e()}))])],1)],1)},staticRenderFns:[]};var a=s("VU/8")(i,o,!1,function(t){s("DuvX")},"data-v-34823a23",null);e.default=a.exports},xUTB:function(t,e,s){t.exports=s.p+"static/img/nocoupon.b1a477e.png"}});